import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as w,E as F,w as z,o as T,c as m,d as n,e,j as $,y as I,t as h,k as A,F as j,l as E,a2 as D,h as N,x as _,p as P}from"./vendor-BOi6Gr0G.js";const R=["src","alt"],V={key:0,class:"absolute inset-0 bg-gray-100 animate-pulse flex items-center justify-center"},q={key:1,class:"absolute inset-0 bg-gradient-to-br from-red-100 to-red-200 flex flex-col items-center justify-center text-red-600 text-xs p-2 text-center"},U={class:"font-medium"},G=3,M={__name:"ImageWithFallback",props:{src:{type:String,required:!0},alt:{type:String,default:"Imagen"},fallbackText:{type:String,default:""},containerClass:{type:String,default:""},imageClass:{type:String,default:"w-full h-full object-cover"}},setup(i){const g=i,l=w(!0),u=w(!1),f=w(""),d=w(0),r=F(()=>g.fallbackText||g.alt||"Sin imagen"),a=b=>{const o=document.createElement("canvas"),s=o.getContext("2d");o.width=300,o.height=200;const C=s.createLinearGradient(0,0,300,200);C.addColorStop(0,"#ef4444"),C.addColorStop(1,"#dc2626"),s.fillStyle=C,s.fillRect(0,0,300,200),s.fillStyle="white",s.font="bold 14px Arial",s.textAlign="center",s.textBaseline="middle";const L=280,S=b.split(" ");let v="";const p=[];for(let c=0;c<S.length;c++){const y=v+S[c]+" ";s.measureText(y).width>L&&c>0?(p.push(v),v=S[c]+" "):v=y}p.push(v);const W=100-p.length*10;return p.forEach((c,y)=>{s.fillText(c.trim(),150,W+y*20)}),o.toDataURL()},k=()=>{l.value=!1,u.value=!1},t=()=>{if(l.value=!1,d.value++,d.value<G){const b=[`https://picsum.photos/300/200?random=${Date.now()}`,`https://via.placeholder.com/300x200/ef4444/ffffff?text=${encodeURIComponent(r.value.substring(0,20))}`,a(r.value)];if(d.value<=b.length){f.value=b[d.value-1];return}}u.value=!0,f.value=a(r.value)},x=()=>{l.value=!0,u.value=!1,d.value=0,f.value=g.src};return z(()=>g.src,x),T(x),(b,o)=>(n(),m("div",{class:I(["image-container relative overflow-hidden",i.containerClass])},[e("img",{src:f.value,alt:i.alt,class:I(i.imageClass),onLoad:k,onError:t,loading:"lazy"},null,42,R),l.value?(n(),m("div",V,o[0]||(o[0]=[e("div",{class:"text-gray-400 text-sm"},"Cargando...",-1)]))):$("",!0),u.value&&!l.value?(n(),m("div",q,[o[1]||(o[1]=e("i",{class:"pi pi-image text-2xl mb-2 opacity-50"},null,-1)),e("span",U,h(r.value),1)])):$("",!0)],2))}},Y=B(M,[["__scopeId","data-v-ae183088"]]),H={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 gap-2 sm:gap-4 md:gap-6"},J={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 gap-2 sm:gap-4 md:gap-6"},K={class:"w-full flex justify-center items-center h-32 bg-gradient-to-br from-gray-100 via-blue-100 to-red-100 rounded-t-lg overflow-hidden group relative"},O={class:"absolute top-1 right-1 bg-gradient-to-r from-red-600 to-red-700 text-white px-1 py-0.5 rounded text-xs font-normal shadow-sm border border-white/20 leading-none md:top-2 md:right-2 md:px-2.5 md:py-1 md:rounded-full md:font-bold md:shadow-lg z-10"},Q={class:"absolute top-1 left-1 bg-gradient-to-r from-green-600 to-emerald-600 text-white px-1 py-0.5 rounded text-xs font-normal shadow-sm border border-white/20 leading-none md:top-2 md:left-2 md:px-2.5 md:py-1 md:rounded-full md:font-bold md:shadow-lg z-10"},X={class:"text-sm sm:text-base md:text-lg font-bold text-gray-800 leading-tight line-clamp-2 group-hover:text-red-700 transition-colors duration-300"},Z={class:"flex-grow"},ee={class:"text-gray-600 text-xs sm:text-sm mb-2 sm:mb-4 line-clamp-2 leading-relaxed"},te={class:"text-lg sm:text-xl md:text-2xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent mb-2 sm:mb-4"},re={class:"flex gap-1 sm:gap-2 mt-auto"},ae=["onClick","disabled"],oe=["onClick"],de={__name:"ProductGrid",props:{loading:{type:Boolean,required:!0},filteredProducts:{type:Array,required:!0}},emits:["comprar-producto","ver-detalles"],setup(i,{emit:g}){const l=g,u=r=>{l("comprar-producto",r)},f=r=>{l("ver-detalles",r)},d=r=>r.imagen?r.imagen.startsWith("http")||r.imagen.startsWith("data:")?r.imagen:`/images/productos/${r.imagen}`:null;return(r,a)=>{const k=A("Card");return i.loading?(n(),m("div",H,[(n(),m(j,null,E(8,t=>e("div",{key:t,class:"animate-pulse"},a[0]||(a[0]=[D('<div class="bg-gradient-to-br from-white via-gray-50 to-gray-100 rounded-xl border-2 border-gray-200 p-4 sm:p-6 shadow-lg"><div class="h-32 bg-gradient-to-br from-gray-200 to-gray-300 rounded-lg mb-4"></div><div class="h-4 bg-gradient-to-r from-gray-200 to-gray-300 rounded mb-3"></div><div class="h-3 bg-gradient-to-r from-gray-200 to-gray-300 rounded mb-3 w-3/4"></div><div class="h-6 bg-gradient-to-r from-green-200 to-green-300 rounded mb-4 w-1/2"></div><div class="h-8 bg-gradient-to-r from-red-200 to-blue-200 rounded"></div></div>',1)]))),64))])):(n(),m("div",J,[(n(!0),m(j,null,E(i.filteredProducts,t=>(n(),N(k,{key:t.id,class:"border-2 border-gray-200 bg-gradient-to-br from-white via-blue-50/30 to-red-50/30 shadow-lg hover:shadow-2xl transition-all duration-500 flex flex-col h-full transform hover:-translate-y-2 hover:border-red-300 group"},{header:_(()=>[e("div",K,[P(Y,{src:d(t),alt:t.nombre,"fallback-text":t.nombre,"container-class":"w-full h-full","image-class":"w-full h-full object-cover transition-all duration-500 group-hover:scale-110"},null,8,["src","alt","fallback-text"]),e("div",O,h(t.categoria),1),e("div",Q," Stock: "+h(t.stock_actual),1),a[1]||(a[1]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1))])]),title:_(()=>[e("span",X,h(t.nombre),1)]),content:_(()=>[e("div",Z,[e("div",ee,h(t.descripcion),1),e("div",te," $"+h(t.precio.toFixed(2)),1)])]),footer:_(()=>[e("div",re,[e("button",{onClick:x=>u(t),disabled:t.stock_actual<=0,class:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 border-none px-2 py-1.5 sm:px-4 sm:py-2 text-white text-xs sm:text-sm font-bold rounded-lg transition-all duration-300 flex-1 shadow-md hover:shadow-lg transform hover:-translate-y-1 disabled:bg-gray-400 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed"}," ðŸ›’ Comprar ",8,ae),e("button",{onClick:x=>f(t),class:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 border-none text-white transition-all duration-300 w-8 h-8 sm:w-10 sm:h-10 p-0 shadow-md hover:shadow-lg transform hover:-translate-y-1 rounded-lg flex items-center justify-center"},a[2]||(a[2]=[e("i",{class:"pi pi-eye text-xs sm:text-sm"},null,-1)]),8,oe)])]),_:2},1024))),128))]))}}};export{de as default};
