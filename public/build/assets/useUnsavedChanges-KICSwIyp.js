import{r as a,a3 as f,E as v,w as m,o as F,ab as q}from"./vendor-BOi6Gr0G.js";function C(d,l){const i=a(!1),o=a(!1),n=a({}),t=a({}),u=e=>{let s={};e.systemName!==void 0||e.system_name!==void 0?s={systemName:e.systemName||e.system_name||"",version:e.version||"",contactEmail:e.contactEmail||e.contact_email||"",contactPhone:e.contactPhone||e.contact_phone||"",...e}:e.requireEmailVerification!==void 0||e.enableTwoFactor!==void 0?s={requireEmailVerification:e.requireEmailVerification||!1,enableTwoFactor:e.enableTwoFactor||!1,sessionTimeout:e.sessionTimeout||60,...e}:e.emailNotifications!==void 0||e.smsNotifications!==void 0?s={emailNotifications:e.emailNotifications||!1,smsNotifications:e.smsNotifications||!1,smtpServer:e.smtpServer||"",...e}:e.description!==void 0||e.mission!==void 0||e.vision!==void 0?s={description:e.description||"",mission:e.mission||"",vision:e.vision||"",...e}:s={...e},t.value=JSON.parse(JSON.stringify(s)),n.value=JSON.parse(JSON.stringify(s)),i.value=!1,o.value=!1,r.value=null},c=()=>{const e=JSON.stringify(n.value)!==JSON.stringify(t.value);return i.value=e,e},p=async()=>{try{l&&(await l(n.value),t.value=JSON.parse(JSON.stringify(n.value)),i.value=!1)}catch(e){throw console.error("Error al guardar:",e),e}},g=()=>{n.value=JSON.parse(JSON.stringify(t.value)),i.value=!1},h=()=>{if(o.value=!1,i.value=!1,r.value){const e=r.value;r.value=null,f.visit(e.url,e.options)}},N=()=>{o.value=!1,r.value=null},r=a(null),S=f.on("before",e=>{if(i.value){const s=e.detail.visit.url,J=e.detail.visit.method==="post",O=s.includes("settings");return J&&O?!0:(r.value={url:e.detail.visit.url,options:{method:e.detail.visit.method,data:e.detail.visit.data,replace:e.detail.visit.replace,preserveScroll:e.detail.visit.preserveScroll,preserveState:e.detail.visit.preserveState,only:e.detail.visit.only,headers:e.detail.visit.headers,errorBag:e.detail.visit.errorBag,forceFormData:e.detail.visit.forceFormData,queryStringArrayFormat:e.detail.visit.queryStringArrayFormat}},o.value=!0,!1)}}),y=v(()=>i.value),E=v(()=>i.value);return m(()=>d,e=>{e&&u(e.value||e)},{immediate:!0,deep:!0}),m(n,()=>{c()},{deep:!0}),F(()=>{}),q(()=>{S()}),{hasUnsavedChanges:i,showUnsavedModal:o,currentFormData:n,originalData:t,pendingNavigation:r,canSave:y,canReset:E,initializeData:u,checkForChanges:c,saveChanges:p,resetChanges:g,confirmExit:h,cancelExit:N}}export{C as u};
