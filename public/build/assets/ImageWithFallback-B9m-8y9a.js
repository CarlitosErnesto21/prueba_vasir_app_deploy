import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as d,E as T,w as W,o as j,c as p,d as x,e as m,j as C,y as k,t as B}from"./vendor-BOi6Gr0G.js";const z=["src","alt"],A={key:0,class:"absolute inset-0 bg-gray-100 animate-pulse flex items-center justify-center"},F={key:1,class:"absolute inset-0 bg-gradient-to-br from-red-100 to-red-200 flex flex-col items-center justify-center text-red-600 text-xs p-2 text-center"},D={class:"font-medium"},N={__name:"ImageWithFallback",props:{src:{type:String,default:null},alt:{type:String,default:"Imagen"},fallbackText:{type:String,default:""},containerClass:{type:String,default:""},imageClass:{type:String,default:"w-full h-full object-cover"}},setup(o){const l=o,s=d(!0),n=d(!1),i=d(""),h=d(0),f=T(()=>l.fallbackText||l.alt||"Sin imagen"),y=S=>{const e=document.createElement("canvas"),t=e.getContext("2d");e.width=300,e.height=200;const g=t.createLinearGradient(0,0,300,200);g.addColorStop(0,"#ef4444"),g.addColorStop(1,"#dc2626"),t.fillStyle=g,t.fillRect(0,0,300,200),t.fillStyle="white",t.font="bold 14px Arial",t.textAlign="center",t.textBaseline="middle";const E=280,v=S.split(" ");let r="";const c=[];for(let a=0;a<v.length;a++){const u=r+v[a]+" ";t.measureText(u).width>E&&a>0?(c.push(r),r=v[a]+" "):r=u}c.push(r);const I=100-c.length*10;return c.forEach((a,u)=>{t.fillText(a.trim(),150,I+u*20)}),e.toDataURL()},_=()=>{s.value=!1,n.value=!1},w=()=>{s.value=!1,h.value++,n.value=!0,i.value=y(f.value)},b=()=>{if(!l.src){s.value=!1,n.value=!0,i.value=y(f.value);return}s.value=!0,n.value=!1,h.value=0,i.value=l.src};return W(()=>l.src,b),j(b),(S,e)=>(x(),p("div",{class:k(["image-container relative overflow-hidden",o.containerClass])},[m("img",{src:i.value,alt:o.alt,class:k(o.imageClass),onLoad:_,onError:w,loading:"lazy"},null,42,z),s.value?(x(),p("div",A,e[0]||(e[0]=[m("div",{class:"text-gray-400 text-sm"},"Cargando...",-1)]))):C("",!0),n.value&&!s.value?(x(),p("div",F,[e[1]||(e[1]=m("i",{class:"pi pi-image text-2xl mb-2 opacity-50"},null,-1)),m("span",D,B(f.value),1)])):C("",!0)],2))}},U=L(N,[["__scopeId","data-v-80081647"]]);export{U as I};
