import{A as De}from"./AuthenticatedLayout-ySbiGZ3w.js";import{N,r as i,E as Se,w as Ne,n as H,o as Ie,k as _,c as b,d as x,p as o,$ as n,a0 as Ae,x as u,e as a,a1 as Te,t as g,y as F,q as w,j as k,F as te,l as Le}from"./vendor-BOi6Gr0G.js";import{z as Fe,F as X,A as p}from"./ui-BibPgP1I.js";import{l as Ue,a as le,b as se,j as je,c as Oe,i as $e,d as Y,e as oe,g as re,h as Be}from"./index-Btbp3Gjs.js";import"./logo-DN1bLr27.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const qe={class:"py-4 sm:py-6 px-4 sm:px-7 mt-6 sm:mt-10 mx-auto bg-red-50 shadow-md rounded-lg h-screen-full"},ze={class:"flex flex-col lg:flex-row lg:justify-between lg:items-center mb-4 gap-4"},Me={class:"flex flex-col sm:flex-row items-center gap-2 w-full lg:w-auto lg:justify-end"},Ge={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},Re={class:"flex items-center justify-between mb-3"},We={class:"flex items-center gap-3"},Je={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},Ke={class:"space-y-3"},Qe={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 gap-3"},He={class:"text-sm font-medium leading-relaxed"},Xe={class:"text-sm leading-relaxed whitespace-normal"},Ye={class:"text-sm leading-relaxed"},Ze={class:"text-sm leading-relaxed"},ea={class:"font-medium"},aa={class:"text-gray-500"},ta={class:"text-sm font-medium leading-relaxed"},la={class:"flex gap-1 justify-center items-center w-64"},sa=["onClick"],oa=["onClick"],ra=["onClick"],na={class:"space-y-4"},ia={class:"w-full flex flex-col"},da={class:"flex items-center gap-4"},ua={key:0,class:"text-red-500 ml-28"},ca={key:1,class:"text-orange-500 ml-28"},ma={key:2,class:"text-red-500 ml-28"},va={class:"w-full flex flex-col"},pa={class:"flex items-start gap-4"},ga={key:0,class:"text-red-500 ml-28"},fa={key:1,class:"text-orange-500 ml-28"},ba={key:2,class:"text-red-500 ml-28"},xa={class:"w-full flex flex-col"},ha={class:"flex items-center gap-4"},ya={key:0,class:"text-red-500 ml-28"},wa={class:"w-full flex flex-col"},_a={class:"flex items-center gap-4"},ka={key:0,class:"text-red-500 ml-28"},Ca={class:"flex gap-4"},Pa={class:"flex-1"},Va={class:"flex-1"},Ea={class:"w-full flex flex-col"},Da={class:"flex items-center gap-4"},Sa={class:"flex-1"},Na={key:0,class:"text-red-500 ml-28"},Ia={class:"flex gap-4 flex-wrap mt-4 ml-28"},Aa=["src"],Ta=["onClick"],La={class:"flex justify-center gap-4 w-full"},Fa={class:"flex items-center gap-3"},Ua={class:"flex flex-col"},ja={class:"flex justify-center gap-4 w-full"},Oa={class:"flex items-center gap-3"},$a={class:"flex justify-center gap-3 w-full"},Ba={key:0,class:"flex flex-col items-center justify-center"},qa={class:"flex justify-center items-center w-full h-96"},za=["src"],Ma={key:1,class:"text-center text-gray-500 py-8"},Ga={class:"flex justify-center w-full"},R="/api/productos",ne="/storage/productos/",Za={__name:"Productos",setup(Ra){N.defaults.withCredentials=!0;const c=Fe(),Z=i([]),t=i({id:null,nombre:"",descripcion:"",precio:null,stock_actual:0,stock_minimo:1,categoria_id:null}),f=i([]),I=i([]),A=i([]),T=i([]),E=i(!1),S=i(!1),U=i(!1),L=i(!1),h=i(!1),D=i(!1),C=i(null),j=i([]),O=i(null),$=i(null),y=i({global:{value:null,matchMode:X.CONTAINS},categoria:{value:null,matchMode:X.EQUALS},estado:{value:null,matchMode:X.EQUALS}}),ie=i([{label:"Disponible",value:"DISPONIBLE"},{label:"Stock Bajo",value:"STOCK_BAJO"},{label:"Agotado",value:"AGOTADO"}]),W=i(10),de=i([5,10,20,50]),B=i("Guardar"),ee=i(0),ue=i(null),J=Se(()=>{let s=Z.value;if(y.value.global.value){const e=y.value.global.value.toLowerCase();s=s.filter(r=>{var d;return r.nombre.toLowerCase().includes(e)||r.descripcion&&r.descripcion.toLowerCase().includes(e)||((d=r.categoria)==null?void 0:d.nombre)&&r.categoria.nombre.toLowerCase().includes(e)})}return y.value.categoria.value&&(s=s.filter(e=>e.categoria_id==y.value.categoria.value)),y.value.estado.value&&(s=s.filter(e=>K(e).value===y.value.estado.value)),s}),K=s=>s.stock_actual<=0?{label:"Agotado",value:"AGOTADO",class:"bg-red-100 text-red-800"}:s.stock_actual<=s.stock_minimo?{label:"Stock Bajo",value:"STOCK_BAJO",class:"bg-yellow-100 text-yellow-800"}:{label:"Disponible",value:"DISPONIBLE",class:"bg-green-100 text-green-800"};Ne([t,f,T],()=>{C.value&&E.value&&H(()=>{const s={...t.value,imagenes_actuales:[...f.value]},e=JSON.stringify(s)!==JSON.stringify({...C.value,imagenes_actuales:C.value.imagenes_originales})||T.value.length>0,r=!C.value.id,d=t.value.nombre||t.value.descripcion||t.value.precio||t.value.categoria_id||f.value.length>0;D.value=e||r&&d})},{deep:!0,flush:"post"});function q(){t.value={id:null,nombre:"",descripcion:"",precio:null,stock_actual:0,stock_minimo:1,categoria_id:null},f.value=[],I.value=[],T.value=[],h.value=!1}Ie(()=>{z(),ce()});const z=async()=>{try{const s=await N.get(R);Z.value=(s.data.data||s.data||[]).map(e=>({...e,imagenes:(e.imagenes||[]).map(r=>typeof r=="string"?r:r.nombre)})).sort((e,r)=>{const d=new Date(e.created_at);return new Date(r.created_at)-d})}catch{c.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los productos.",life:4e3})}},ce=async()=>{try{const s=await N.get("/api/categorias-productos");j.value=s.data.data||s.data||[]}catch{j.value=[],c.add({severity:"error",summary:"Error",detail:"No se pudieron cargar las categor√≠as.",life:4e3})}},me=()=>{y.value.categoria.value=O.value},ve=()=>{y.value.estado.value=$.value},pe=()=>{O.value=null,$.value=null,y.value.global.value=null,y.value.categoria.value=null,y.value.estado.value=null,c.add({severity:"info",summary:"Filtros limpiados",detail:"Se han removido todos los filtros aplicados.",life:3e3})},ge=()=>{q(),B.value="Guardar",h.value=!1,E.value=!0,H(()=>{C.value={...t.value,imagenes_originales:[...f.value]},D.value=!1})},fe=s=>{q(),h.value=!1,t.value={...s},f.value=(s.imagenes||[]).map(e=>typeof e=="string"?e:e.nombre),D.value=!1,B.value="Actualizar",E.value=!0,H(()=>{C.value={...t.value,imagenes_originales:[...f.value]},D.value=!1})},be=async()=>{if(h.value=!0,!t.value.nombre||t.value.nombre.length<3||t.value.nombre.length>100){c.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios est√©n completos y cumplan los requisitos.",life:4e3});return}if(!t.value.descripcion||t.value.descripcion.length<10||t.value.descripcion.length>255){c.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios est√©n completos y cumplan los requisitos.",life:4e3});return}if(!t.value.precio||!t.value.categoria_id||f.value.length===0){c.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios est√©n completos.",life:4e3});return}if(t.value.precio<=0||t.value.precio>999.99){c.add({severity:"warn",summary:"Verificar datos",detail:"Por favor revisa los valores ingresados y corrige cualquier inconsistencia.",life:4e3});return}if(t.value.stock_actual<0||t.value.stock_minimo<1){c.add({severity:"warn",summary:"Verificar datos",detail:"Por favor revisa los valores de stock y corrige cualquier inconsistencia.",life:4e3});return}const s=2*1024*1024;if(I.value.filter(r=>r.size>s).length>0){c.add({severity:"warn",summary:"Verificar archivos",detail:"Por favor revisa el tama√±o de las im√°genes seleccionadas.",life:4e3});return}try{const r=new FormData;r.append("nombre",t.value.nombre||""),r.append("descripcion",t.value.descripcion||""),r.append("precio",t.value.precio||""),r.append("stock_actual",t.value.stock_actual||"0"),r.append("stock_minimo",t.value.stock_minimo||"1"),r.append("categoria_id",t.value.categoria_id||""),I.value.forEach(v=>r.append("imagenes[]",v)),T.value.forEach(v=>{const m=v.includes("/")?v.split("/").pop():v;r.append("removed_images[]",m)});let d;t.value.id?(r.append("_method","PUT"),d=await N.post(`${R}/${t.value.id}`,r,{headers:{"Content-Type":"multipart/form-data"}}),c.add({severity:"success",summary:"¬°√âxito!",detail:"El producto ha sido actualizado correctamente.",life:5e3})):(d=await N.post(R,r,{headers:{"Content-Type":"multipart/form-data"}}),c.add({severity:"success",summary:"¬°√âxito!",detail:"El producto ha sido creado correctamente.",life:5e3})),await z(),E.value=!1,D.value=!1,C.value=null,q()}catch{c.add({severity:"warn",summary:"Error de validaci√≥n",detail:"Por favor revisa los campos e intenta nuevamente.",life:6e3})}},xe=s=>{t.value={...s},S.value=!0},he=async()=>{var s,e,r,d,v;try{await N.delete(`${R}/${t.value.id}`),await z(),S.value=!1,c.add({severity:"success",summary:"¬°Eliminado!",detail:"El producto ha sido eliminado correctamente.",life:5e3})}catch(m){if(S.value=!1,((s=m.response)==null?void 0:s.status)===422){const P=m.response.data;let M=P.error||"El producto est√° siendo utilizado en el sistema.";P.details&&Array.isArray(P.details)&&(M+=`

üìã Detalles:
‚Ä¢ `+P.details.join(`
‚Ä¢ `)),c.add({severity:"warn",summary:"‚ùå No se puede eliminar",detail:M,life:1e4})}else if(((e=m.response)==null?void 0:e.status)===404)c.add({severity:"error",summary:"Producto no encontrado",detail:"El producto que intentas eliminar no existe o ya fue eliminado.",life:5e3}),await z();else if(((r=m.response)==null?void 0:r.status)===500)c.add({severity:"error",summary:"Error del servidor",detail:"Ocurri√≥ un error interno. Por favor, contacta al administrador.",life:6e3});else{const P=((v=(d=m.response)==null?void 0:d.data)==null?void 0:v.error)||m.message||"Error desconocido";c.add({severity:"error",summary:"Error",detail:`No se pudo eliminar el producto: ${P}`,life:6e3})}}},ye=()=>{D.value?L.value=!0:ae()},ae=()=>{E.value=!1,L.value=!1,D.value=!1,C.value=null,q()},we=()=>{L.value=!1},_e=s=>{const e=s.target?s.target.files:s.files,r=2*1024*1024;for(const d of e)if(d instanceof File){if(d.size>r){c.add({severity:"warn",summary:"Archivo no v√°lido",detail:"Por favor selecciona archivos que cumplan con los requisitos de tama√±o (m√°ximo 2MB).",life:5e3});continue}if(!d.type.startsWith("image/")){c.add({severity:"warn",summary:"Formato no v√°lido",detail:"Por favor selecciona √∫nicamente archivos de imagen v√°lidos.",life:4e3});continue}I.value.push(d);const v=new FileReader;v.onload=m=>f.value.push(m.target.result),v.readAsDataURL(d)}},ke=s=>{const e=f.value[s];typeof e=="string"&&e.startsWith("data:image")?(f.value.splice(s,1),I.value.splice(s,1)):(T.value.push(e),f.value.splice(s,1))},Ce=s=>{A.value=(s||[]).map(e=>ne+(typeof e=="string"?e:e.nombre)),U.value=!0},Pe=()=>{t.value.nombre&&t.value.nombre.length>100&&(t.value.nombre=t.value.nombre.substring(0,100))},Ve=()=>{t.value.descripcion&&t.value.descripcion.length>255&&(t.value.descripcion=t.value.descripcion.substring(0,255))};return(s,e)=>{const r=_("Toast"),d=_("InputText"),v=_("Select"),m=_("Column"),P=_("DataTable"),M=_("Textarea"),Q=_("InputNumber"),G=_("Dialog"),Ee=_("Carousel");return x(),b(te,null,[o(n(Ae),{title:"Productos"}),o(De,null,{default:u(()=>[o(r,{class:"z-[9999]"}),a("div",qe,[a("div",ze,[e[20]||(e[20]=a("h3",{class:"text-lg sm:text-2xl text-blue-600 font-bold"},"Cat√°logo de Productos",-1)),a("div",Me,[o(n(Te),{href:s.route("catProductos"),class:"bg-blue-500 border border-blue-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300"},{default:u(()=>[o(n(p),{icon:n(Ue),class:"h-4"},null,8,["icon"]),e[18]||(e[18]=a("span",null,"¬†Gestionar categor√≠as",-1))]),_:1,__:[18]},8,["href"]),a("button",{class:"bg-red-500 border border-red-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:ge},[o(n(p),{icon:n(le),class:"h-4 w-4 text-white"},null,8,["icon"]),e[19]||(e[19]=a("span",null,"¬†Agregar producto",-1))])])]),o(P,{value:J.value,dataKey:"id",paginator:!0,rows:W.value,rowsPerPageOptions:de.value,rowsPerPage:W.value,"onUpdate:rowsPerPage":e[3]||(e[3]=l=>W.value=l),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} productos",class:"overflow-x-auto max-w-full",style:{display:"block","max-width":"84vw"},responsiveLayout:"scroll",pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:u(()=>[a("div",Ge,[a("div",Re,[a("div",We,[e[21]||(e[21]=a("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[a("i",{class:"pi pi-filter text-blue-600 text-sm"}),a("span",null,"Filtros")],-1)),a("div",Je,g(J.value.length)+" resultado"+g(J.value.length!==1?"s":""),1)]),a("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md",onClick:pe},[o(n(p),{icon:n($e),class:"h-4 w-4 text-white"},null,8,["icon"]),e[22]||(e[22]=a("span",null,"¬†Limpiar filtros",-1))])]),a("div",Ke,[a("div",null,[o(d,{modelValue:y.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=l=>y.value.global.value=l),placeholder:"üîç Buscar productos...",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])]),a("div",Qe,[a("div",null,[o(v,{modelValue:O.value,"onUpdate:modelValue":e[1]||(e[1]=l=>O.value=l),options:j.value,optionLabel:"nombre",optionValue:"id",placeholder:"Categor√≠a",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"},onChange:me,clearable:!0},null,8,["modelValue","options"])]),a("div",null,[o(v,{modelValue:$.value,"onUpdate:modelValue":e[2]||(e[2]=l=>$.value=l),options:ie.value,optionLabel:"label",optionValue:"value",placeholder:"Estado",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"},onChange:ve,clearable:!0},null,8,["modelValue","options"])])])])])]),default:u(()=>[o(m,{field:"nombre",header:"Nombre",sortable:"",class:"w-44 min-w-44"},{body:u(l=>[a("div",He,g(l.data.nombre),1)]),_:1}),o(m,{field:"descripcion",header:"Descripci√≥n",class:"w-48 min-w-48"},{body:u(l=>[a("div",Xe,g(l.data.descripcion),1)]),_:1}),o(m,{field:"categoria.nombre",header:"Categor√≠a",class:"w-32 min-w-32"},{body:u(l=>{var V;return[a("div",Ye,g(((V=l.data.categoria)==null?void 0:V.nombre)||"Sin categor√≠a"),1)]}),_:1}),o(m,{field:"stock_actual",header:"Stock",class:"w-24 min-w-24"},{body:u(l=>[a("div",Ze,[a("span",ea,g(l.data.stock_actual),1),a("span",aa,"/ "+g(l.data.stock_minimo)+" m√≠n",1)])]),_:1}),o(m,{field:"precio",header:"Precio",class:"w-24 min-w-24"},{body:u(l=>[a("div",ta,g(isNaN(Number(l.data.precio))?"":`$${Number(l.data.precio).toFixed(2)}`),1)]),_:1}),o(m,{field:"estado",header:"Estado",class:"w-28 min-w-28"},{body:u(l=>[a("span",{class:F("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+K(l.data).class)},g(K(l.data).label),3)]),_:1}),o(m,{exportable:!1,class:"w-56 min-w-56"},{header:u(()=>e[23]||(e[23]=[a("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:u(l=>[a("div",la,[a("button",{class:"bg-orange-200/30 border py-2 px-1 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:V=>fe(l.data)},[o(n(p),{icon:n(se),class:"h-4 w-4 text-orange-600"},null,8,["icon"]),e[24]||(e[24]=w(" ¬†Editar "))],8,sa),a("button",{class:"bg-blue-200/50 border py-2 px-1 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:V=>Ce(l.data.imagenes)},[o(n(p),{icon:n(je),class:"h-4 w-4 text-blue-600"},null,8,["icon"]),e[25]||(e[25]=w(" ¬†Imgs "))],8,oa),a("button",{class:"bg-red-200/30 border py-2 px-1 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:V=>xe(l.data)},[o(n(p),{icon:n(Oe),class:"h-4 w-4 text-red-600"},null,8,["icon"]),e[26]||(e[26]=w(" ¬†Eliminar "))],8,ra)])]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","rowsPerPage"]),o(G,{visible:E.value,"onUpdate:visible":e[11]||(e[11]=l=>E.value=l),header:B.value+" Producto",modal:!0,style:{width:"500px"},closable:!1},{footer:u(()=>[a("div",La,[a("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:ye},[o(n(p),{icon:n(Y),class:"h-5 text-green-600"},null,8,["icon"]),e[36]||(e[36]=w(" Cancelar "))]),a("button",{class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:be},[o(n(p),{icon:n(oe),class:"h-5 text-white"},null,8,["icon"]),w(" "+g(B.value),1)])])]),default:u(()=>[a("div",na,[a("div",ia,[a("div",da,[e[27]||(e[27]=a("label",{for:"nombre",class:"w-24 flex items-center gap-1"},[w(" Nombre: "),a("span",{class:"text-red-500 font-bold"},"*")],-1)),o(d,{modelValue:t.value.nombre,"onUpdate:modelValue":e[4]||(e[4]=l=>t.value.nombre=l),modelModifiers:{trim:!0},id:"nombre",name:"nombre",maxlength:100,class:F([{"p-invalid":h.value&&(!t.value.nombre||t.value.nombre.length<3||t.value.nombre.length>100)},"flex-1"]),onInput:Pe},null,8,["modelValue","class"])]),t.value.nombre&&t.value.nombre.length<3?(x(),b("small",ua," El nombre debe tener al menos 3 caracteres. Actual: "+g(t.value.nombre.length)+"/3 ",1)):k("",!0),t.value.nombre&&t.value.nombre.length>=90&&t.value.nombre.length<=100?(x(),b("small",ca," Caracteres restantes: "+g(100-t.value.nombre.length),1)):k("",!0),h.value&&!t.value.nombre?(x(),b("small",ma," El nombre es obligatorio. ")):k("",!0)]),a("div",va,[a("div",pa,[e[28]||(e[28]=a("label",{for:"descripcion",class:"w-24 flex items-center gap-1 mt-2"},[w(" Descripci√≥n: "),a("span",{class:"text-red-500 font-bold"},"*")],-1)),o(M,{modelValue:t.value.descripcion,"onUpdate:modelValue":e[5]||(e[5]=l=>t.value.descripcion=l),modelModifiers:{trim:!0},id:"descripcion",name:"descripcion",maxlength:255,rows:"3",class:F([{"p-invalid":h.value&&(!t.value.descripcion||t.value.descripcion.length<10||t.value.descripcion.length>255)},"flex-1"]),onInput:Ve,placeholder:"Describe el producto..."},null,8,["modelValue","class"])]),t.value.descripcion&&t.value.descripcion.length<10?(x(),b("small",ga," La descripci√≥n debe tener al menos 10 caracteres. Actual: "+g(t.value.descripcion.length)+"/10 ",1)):k("",!0),t.value.descripcion&&t.value.descripcion.length>=230&&t.value.descripcion.length<=255?(x(),b("small",fa," Caracteres restantes: "+g(255-t.value.descripcion.length),1)):k("",!0),h.value&&!t.value.descripcion?(x(),b("small",ba," La descripci√≥n es obligatoria. ")):k("",!0)]),a("div",xa,[a("div",ha,[e[29]||(e[29]=a("label",{for:"categoria_id",class:"w-24 flex items-center gap-1"},[w(" Categor√≠a: "),a("span",{class:"text-red-500 font-bold"},"*")],-1)),o(v,{modelValue:t.value.categoria_id,"onUpdate:modelValue":e[6]||(e[6]=l=>t.value.categoria_id=l),options:j.value,optionLabel:"nombre",optionValue:"id",id:"categoria_id",name:"categoria_id",class:F(["flex-1",{"p-invalid":h.value&&!t.value.categoria_id}]),placeholder:"Selecciona una categor√≠a"},null,8,["modelValue","options","class"])]),h.value&&!t.value.categoria_id?(x(),b("small",ya," La categor√≠a es obligatoria. ")):k("",!0)]),a("div",wa,[a("div",_a,[e[30]||(e[30]=a("label",{for:"precio",class:"w-24 flex items-center gap-1"},[w(" Precio: "),a("span",{class:"text-red-500 font-bold"},"*")],-1)),o(Q,{modelValue:t.value.precio,"onUpdate:modelValue":e[7]||(e[7]=l=>t.value.precio=l),id:"precio",name:"precio",mode:"currency",currency:"USD",locale:"en-US",min:.01,max:999.99,maxFractionDigits:2,minFractionDigits:2,class:F([{"p-invalid":h.value&&(!t.value.precio||t.value.precio<=0||t.value.precio>999.99)},"flex-1"]),placeholder:"$0.00"},null,8,["modelValue","class"])]),h.value&&(t.value.precio==null||t.value.precio<=0||t.value.precio>999.99)?(x(),b("small",ka," El precio es obligatorio, debe ser mayor a 0 y menor o igual a 999.99. ")):k("",!0)]),a("div",Ca,[a("div",Pa,[e[31]||(e[31]=a("label",{for:"stock_actual",class:"block mb-2"},"Stock actual:",-1)),o(Q,{modelValue:t.value.stock_actual,"onUpdate:modelValue":e[8]||(e[8]=l=>t.value.stock_actual=l),id:"stock_actual",name:"stock_actual",min:0,max:9999,step:1,showButtons:"",useGrouping:!1,class:"w-full",placeholder:"0"},null,8,["modelValue"])]),a("div",Va,[e[32]||(e[32]=a("label",{for:"stock_minimo",class:"block mb-2"},"Stock m√≠nimo:",-1)),o(Q,{modelValue:t.value.stock_minimo,"onUpdate:modelValue":e[9]||(e[9]=l=>t.value.stock_minimo=l),id:"stock_minimo",name:"stock_minimo",min:1,max:100,step:1,showButtons:"",useGrouping:!1,class:"w-full",placeholder:"1"},null,8,["modelValue"])])]),a("div",Ea,[a("div",Da,[e[34]||(e[34]=a("label",{for:"imagenes",class:"w-24 flex items-center gap-1"},[w(" Im√°genes: "),a("span",{class:"text-red-500 font-bold"},"*")],-1)),a("div",Sa,[a("input",{type:"file",id:"imagenes",name:"imagenes[]",accept:"image/*",multiple:"",onChange:_e,class:"hidden",ref_key:"fileInput",ref:ue},null,544),a("button",{type:"button",class:"bg-white hover:bg-red-50 text-red-500 hover:text-red-600 border border-red-500 hover:border-red-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 outline-none focus:outline-none active:outline-none",onClick:e[10]||(e[10]=l=>s.$refs.fileInput.click())},[o(n(p),{icon:n(le),class:"h-4"},null,8,["icon"]),e[33]||(e[33]=a("span",null,"Subir im√°genes",-1))])])]),h.value&&f.value.length===0?(x(),b("small",Na," Las im√°genes son obligatorias (al menos una). ")):k("",!0)]),a("div",Ia,[(x(!0),b(te,null,Le(f.value,(l,V)=>(x(),b("div",{key:V,class:"relative w-32 h-32"},[a("img",{src:l.startsWith("data:image")?l:ne+l,alt:"Vista previa",class:"w-full h-full object-cover rounded border"},null,8,Aa),a("button",{onClick:Wa=>ke(V),class:"absolute top-2 right-2 bg-gray-600/80 hover:bg-gray-700/80 text-white font-bold py-1 px-2 rounded-full shadow",style:{transform:"translate(50%, -50%)"}},e[35]||(e[35]=[a("i",{class:"pi pi-times text-xs"},null,-1)]),8,Ta)]))),128))])])]),_:1},8,["visible","header"]),o(G,{visible:S.value,"onUpdate:visible":e[13]||(e[13]=l=>S.value=l),header:"Eliminar producto",modal:!0,style:{width:"350px"},closable:!1},{footer:u(()=>[a("div",ja,[a("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[12]||(e[12]=l=>S.value=!1)},[o(n(p),{icon:n(Y),class:"h-5"},null,8,["icon"]),e[40]||(e[40]=a("span",null,"No",-1))]),a("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:he},[o(n(p),{icon:n(oe),class:"h-5"},null,8,["icon"]),e[41]||(e[41]=a("span",null,"S√≠",-1))])])]),default:u(()=>[a("div",Fa,[o(n(p),{icon:n(re),class:"h-8 w-8 text-red-500"},null,8,["icon"]),a("div",Ua,[a("span",null,[e[37]||(e[37]=w("¬øEst√°s seguro de eliminar el producto: ")),a("b",null,g(t.value.nombre),1),e[38]||(e[38]=w("?"))]),e[39]||(e[39]=a("span",{class:"text-red-600 text-sm font-medium mt-1"},"Esta acci√≥n es irreversible.",-1))])])]),_:1},8,["visible"]),o(G,{visible:L.value,"onUpdate:visible":e[14]||(e[14]=l=>L.value=l),header:"Cambios sin guardar",modal:!0,style:{width:"400px"},closable:!1},{footer:u(()=>[a("div",$a,[a("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:we},[o(n(p),{icon:n(se),class:"h-4"},null,8,["icon"]),e[43]||(e[43]=a("span",null,"Continuar",-1))]),a("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:ae},[o(n(p),{icon:n(Be),class:"h-4"},null,8,["icon"]),e[44]||(e[44]=a("span",null,"Salir sin guardar",-1))])])]),default:u(()=>[a("div",Oa,[o(n(p),{icon:n(re),class:"h-8 w-8 text-red-500"},null,8,["icon"]),e[42]||(e[42]=a("div",{class:"flex flex-col"},[a("span",null,"¬°Tienes informaci√≥n sin guardar!"),a("span",{class:"text-red-600 text-sm font-medium mt-1"},"¬øDeseas salir sin guardar?")],-1))])]),_:1},8,["visible"]),o(G,{visible:U.value,"onUpdate:visible":e[17]||(e[17]=l=>U.value=l),header:"Im√°genes del producto",modal:!0,closable:!1,style:{width:"700px"}},{footer:u(()=>[a("div",Ga,[a("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[16]||(e[16]=l=>U.value=!1)},[o(n(p),{icon:n(Y),class:"h-5"},null,8,["icon"]),e[45]||(e[45]=a("span",null,"Cerrar",-1))])])]),default:u(()=>[A.value.length?(x(),b("div",Ba,[o(Ee,{value:A.value,numVisible:1,numScroll:1,circular:!0,page:ee.value,"onUpdate:page":e[15]||(e[15]=l=>ee.value=l),class:"w-full",showIndicators:A.value.length>1,showNavigators:A.value.length>1,style:{"max-width":"610px"}},{item:u(l=>[a("div",qa,[a("img",{src:l.data,alt:"Imagen producto",class:"w-auto h-full max-h-96 object-contain rounded shadow"},null,8,za)])]),_:1},8,["value","page","showIndicators","showNavigators"])])):(x(),b("div",Ma," No hay im√°genes para este producto. "))]),_:1},8,["visible"])])]),_:1})],64)}}};export{Za as default};
