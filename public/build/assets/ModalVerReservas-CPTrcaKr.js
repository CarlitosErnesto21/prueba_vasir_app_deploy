import{r as V,E as L,k as v,h as q,d as i,x as o,e as a,c as u,p as n,t as c,q as k,j as D,y as z}from"./vendor-BOi6Gr0G.js";const U={class:"p-6"},$={class:"flex flex-col md:flex-row gap-4 mb-6"},A={class:"flex-1"},M={class:"flex-1"},O={key:0,class:"p-8 text-center"},j={key:1,class:"p-8 text-center text-gray-500"},H={key:2,class:"overflow-hidden rounded-lg border border-gray-200"},W={class:"flex flex-col"},G={class:"font-medium"},J={class:"text-xs text-gray-500"},K={class:"flex flex-col text-xs"},Q={key:0},X={key:1},Y={key:0,class:"flex gap-1"},Z=["onClick"],P=["onClick"],te={__name:"ModalVerReservas",props:{visible:{type:Boolean,default:!1},reservas:{type:Array,default:()=>[]},titulo:{type:String,default:"Reservas"},loading:{type:Boolean,default:!1}},emits:["update:visible","confirmarReserva","rechazarReserva"],setup(h,{emit:B}){const T=h,N=B,p=V(""),m=V(null),C=L(()=>{let s=T.reservas||[];if(p.value){const e=p.value.toLowerCase();s=s.filter(r=>{var x,l,_,w,t,d,y,g,f,b;return((_=(l=(x=r.cliente)==null?void 0:x.user)==null?void 0:l.name)==null?void 0:_.toLowerCase().includes(e))||((t=(w=r.cliente)==null?void 0:w.nombres)==null?void 0:t.toLowerCase().includes(e))||((g=(y=(d=r.cliente)==null?void 0:d.user)==null?void 0:y.email)==null?void 0:g.toLowerCase().includes(e))||((b=(f=r.cliente)==null?void 0:f.correo)==null?void 0:b.toLowerCase().includes(e))})}if(m.value){const e=new Date(m.value).toISOString().split("T")[0];s=s.filter(r=>r.fecha_reserva?new Date(r.fecha_reserva).toISOString().split("T")[0]===e:!1)}return s.sort((e,r)=>new Date(r.fecha_reserva)-new Date(e.fecha_reserva))}),R=()=>{p.value="",m.value=null,N("update:visible",!1)},E=s=>s?new Date(s).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",F=s=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"USD"}).format(s||0),I=s=>({Pendiente:"bg-yellow-100 text-yellow-800",Confirmado:"bg-green-100 text-green-800",Rechazada:"bg-red-100 text-red-800",Reprogramada:"bg-blue-100 text-blue-800"})[s]||"bg-gray-100 text-gray-800";return(s,e)=>{const r=v("InputText"),x=v("DatePicker"),l=v("Column"),_=v("DataTable"),w=v("Dialog");return i(),q(w,{visible:h.visible,"onUpdate:visible":R,modal:"",header:h.titulo,style:{width:"95vw",maxWidth:"1200px"},draggable:!1,position:"center",pt:{root:{class:"rounded-lg border border-gray-200"},header:{class:"bg-red-50 border-b px-6 py-4"},content:{class:"p-0"},footer:{class:"border-t px-6 py-4 bg-gray-50"}}},{footer:o(()=>[a("div",{class:"flex justify-end"},[a("button",{class:"bg-gray-500 border border-gray-500 text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300 px-4 py-2 flex items-center gap-2",onClick:R},e[8]||(e[8]=[a("i",{class:"pi pi-times"},null,-1),k(" Cerrar ")]))])]),default:o(()=>[a("div",U,[a("div",$,[a("div",A,[e[2]||(e[2]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Buscar por cliente ",-1)),n(r,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=t=>p.value=t),placeholder:"Nombre o correo del cliente...",class:"w-full"},null,8,["modelValue"])]),a("div",M,[e[3]||(e[3]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Buscar por fecha ",-1)),n(x,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=t=>m.value=t),placeholder:"Seleccionar fecha...",dateFormat:"dd/mm/yy",class:"w-full",showIcon:""},null,8,["modelValue"])])]),h.loading?(i(),u("div",O,e[4]||(e[4]=[a("div",{class:"inline-flex items-center"},[a("i",{class:"pi pi-spin pi-spinner text-2xl text-red-600 mr-3"}),a("span",{class:"text-gray-600"},"Cargando reservas...")],-1)]))):C.value.length===0?(i(),u("div",j,e[5]||(e[5]=[a("i",{class:"pi pi-inbox text-4xl text-gray-300 block mb-2"},null,-1),a("span",null,"No hay reservas que coincidan con los filtros",-1)]))):(i(),u("div",H,[n(_,{value:C.value,rows:10,paginator:C.value.length>10,rowsPerPageOptions:[10,20,30],scrollable:"",scrollHeight:"400px",class:"border-0",pt:{table:{class:"w-full"},header:{class:"bg-gray-50"},tbody:{class:"divide-y divide-gray-200"}}},{default:o(()=>[n(l,{header:"Cliente",pt:{headerCell:{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"},bodyCell:{class:"px-4 py-4 text-sm text-gray-900"}}},{body:o(t=>{var d,y,g,f,b,S;return[a("div",W,[a("span",G,c(((y=(d=t.data.cliente)==null?void 0:d.user)==null?void 0:y.name)||((g=t.data.cliente)==null?void 0:g.nombres)||"-"),1),a("span",J,c(((b=(f=t.data.cliente)==null?void 0:f.user)==null?void 0:b.email)||((S=t.data.cliente)==null?void 0:S.correo)||"-"),1)])]}),_:1}),n(l,{header:"Fecha",pt:{headerCell:{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"},bodyCell:{class:"px-4 py-4 text-sm text-gray-900"}}},{body:o(t=>[k(c(E(t.data.fecha_reserva)),1)]),_:1}),n(l,{header:"Cupos",pt:{headerCell:{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"},bodyCell:{class:"px-4 py-4 text-sm text-gray-900"}}},{body:o(t=>[a("div",K,[t.data.cupos_adultos?(i(),u("span",Q," Adultos: "+c(t.data.cupos_adultos),1)):D("",!0),t.data.cupos_menores?(i(),u("span",X," Menores: "+c(t.data.cupos_menores),1)):D("",!0)])]),_:1}),n(l,{header:"Precio Total",pt:{headerCell:{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"},bodyCell:{class:"px-4 py-4 text-sm font-medium text-gray-900"}}},{body:o(t=>[k(c(F(t.data.precio_total)),1)]),_:1}),n(l,{header:"Estado",pt:{headerCell:{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"},bodyCell:{class:"px-4 py-4 text-sm text-gray-900"}}},{body:o(t=>[a("span",{class:z(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",I(t.data.estado)])},c(t.data.estado),3)]),_:1}),n(l,{header:"Acciones",pt:{headerCell:{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"},bodyCell:{class:"px-4 py-4 text-sm text-gray-900"}}},{body:o(t=>[t.data.estado==="Pendiente"?(i(),u("div",Y,[a("button",{class:"bg-green-500 border border-green-500 text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300 p-2",onClick:d=>s.$emit("confirmarReserva",t.data),title:"Confirmar"},e[6]||(e[6]=[a("i",{class:"pi pi-check"},null,-1)]),8,Z),a("button",{class:"bg-red-500 border border-red-500 text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300 p-2",onClick:d=>s.$emit("rechazarReserva",t.data),title:"Rechazar"},e[7]||(e[7]=[a("i",{class:"pi pi-times"},null,-1)]),8,P)])):D("",!0)]),_:1})]),_:1},8,["value","paginator"])]))])]),_:1},8,["visible","header"])}}};export{te as default};
