import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as v,E as T,w as W,o as j,c as y,d as b,e as g,j as C,y as k,t as B}from"./vendor-BOi6Gr0G.js";const R=["src","alt"],z={key:0,class:"absolute inset-0 bg-gray-100 animate-pulse flex items-center justify-center"},A={key:1,class:"absolute inset-0 bg-gradient-to-br from-red-100 to-red-200 flex flex-col items-center justify-center text-red-600 text-xs p-2 text-center"},D={class:"font-medium"},F=3,N={__name:"ImageWithFallback",props:{src:{type:String,default:null},alt:{type:String,default:"Imagen"},fallbackText:{type:String,default:""},containerClass:{type:String,default:""},imageClass:{type:String,default:"w-full h-full object-cover"}},setup(d){const l=d,s=v(!0),n=v(!1),o=v(""),r=v(0),i=T(()=>l.fallbackText||l.alt||"Sin imagen"),p=c=>{const e=document.createElement("canvas"),t=e.getContext("2d");e.width=300,e.height=200;const x=t.createLinearGradient(0,0,300,200);x.addColorStop(0,"#ef4444"),x.addColorStop(1,"#dc2626"),t.fillStyle=x,t.fillRect(0,0,300,200),t.fillStyle="white",t.font="bold 14px Arial",t.textAlign="center",t.textBaseline="middle";const I=280,h=c.split(" ");let u="";const f=[];for(let a=0;a<h.length;a++){const m=u+h[a]+" ";t.measureText(m).width>I&&a>0?(f.push(u),u=h[a]+" "):u=m}f.push(u);const E=100-f.length*10;return f.forEach((a,m)=>{t.fillText(a.trim(),150,E+m*20)}),e.toDataURL()},w=()=>{s.value=!1,n.value=!1},_=()=>{if(s.value=!1,r.value++,r.value<F){const c=[`https://picsum.photos/300/200?random=${Date.now()}`,`https://via.placeholder.com/300x200/ef4444/ffffff?text=${encodeURIComponent(i.value.substring(0,20))}`,p(i.value)];if(r.value<=c.length){o.value=c[r.value-1];return}}n.value=!0,o.value=p(i.value)},S=()=>{if(!l.src){s.value=!1,n.value=!0,o.value=p(i.value);return}s.value=!0,n.value=!1,r.value=0,o.value=l.src};return W(()=>l.src,S),j(S),(c,e)=>(b(),y("div",{class:k(["image-container relative overflow-hidden",d.containerClass])},[g("img",{src:o.value,alt:d.alt,class:k(d.imageClass),onLoad:w,onError:_,loading:"lazy"},null,42,R),s.value?(b(),y("div",z,e[0]||(e[0]=[g("div",{class:"text-gray-400 text-sm"},"Cargando...",-1)]))):C("",!0),n.value&&!s.value?(b(),y("div",A,[e[1]||(e[1]=g("i",{class:"pi pi-image text-2xl mb-2 opacity-50"},null,-1)),g("span",D,B(i.value),1)])):C("",!0)],2))}},M=L(N,[["__scopeId","data-v-aec7a954"]]);export{M as I};
