import{r as i,E as ta,w as sa,n as ie,o as oa,N as B,k as P,c as u,d,p as o,$ as r,a0 as na,x as p,e as l,a1 as ra,t as _,q as w,j as x,y as F,v as De,D as Ie,a5 as ke,F as ee,l as ue}from"./vendor-BOi6Gr0G.js";import{A as ia}from"./AuthenticatedLayout-ySbiGZ3w.js";import{z as ua,F as H,A as h,p as ae}from"./ui-BibPgP1I.js";import{o as da,a as le,b as Ve,j as ca,c as ma,i as va,d as z,e as Te,g as Fe,h as pa}from"./index-Btbp3Gjs.js";import"./logo-DN1bLr27.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const fa={class:"py-4 sm:py-6 px-4 sm:px-7 mt-6 sm:mt-10 mx-auto bg-red-50 shadow-md rounded-lg h-screen-full"},ga={class:"flex flex-col lg:flex-row lg:justify-between lg:items-center mb-4 gap-4"},ha={class:"flex flex-col sm:flex-row items-center gap-2 w-full lg:w-auto lg:justify-end"},ba={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},xa={class:"flex items-center justify-between mb-3"},_a={class:"flex items-center gap-3"},ya={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},wa={class:"space-y-3"},Ca={class:"grid grid-cols-3 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-5 gap-3"},Da={class:"col-span-1 sm:col-span-1 md:col-span-1 lg:col-span-1"},Ia={class:"col-span-1 sm:col-span-1 md:col-span-1 lg:col-span-1"},ka={class:"text-sm font-medium leading-relaxed"},Va={class:"text-sm leading-relaxed whitespace-normal"},Ta={class:"text-sm leading-relaxed whitespace-normal"},Fa={class:"text-sm leading-relaxed"},Sa={class:"text-sm leading-relaxed"},Pa={class:"text-sm font-medium leading-relaxed"},Na={class:"flex gap-1 justify-center items-center w-64"},Ea=["onClick"],La=["onClick"],Aa=["onClick"],Ua={class:"space-y-4"},Oa={class:"w-full flex flex-col"},Ra={class:"flex items-center gap-4"},ja={key:0,class:"text-red-500 ml-28"},qa={key:1,class:"text-orange-500 ml-28"},Ma={key:2,class:"text-red-500 ml-28"},$a={class:"w-full flex flex-col"},Ba={class:"flex items-start gap-4"},Ha={class:"flex-1"},za={class:"flex gap-2 mb-3"},Ga=["disabled"],Wa={class:"space-y-2 max-h-40 overflow-y-auto"},Ka={class:"flex-1"},Qa=["onClick"],Ja={key:0,class:"text-gray-500 text-sm mt-2"},Xa={class:"w-full flex flex-col"},Ya={class:"flex items-start gap-4"},Za={class:"flex-1"},el={class:"flex gap-2 mb-3"},al=["disabled"],ll={key:0,class:"space-y-2 max-h-40 overflow-y-auto"},tl={class:"flex-1"},sl=["onClick"],ol={key:1,class:"text-gray-500 text-sm mt-2"},nl={class:"w-full flex flex-col"},rl={class:"flex items-center gap-4"},il={key:0,class:"text-red-500 ml-28"},ul={key:1,class:"text-orange-500 ml-28"},dl={key:2,class:"text-red-500 ml-28"},cl={key:3,class:"text-red-500 ml-28"},ml={class:"flex gap-4"},vl={class:"flex-1"},pl={key:0,class:"text-red-500 block text-xs mt-1"},fl={class:"flex-1"},gl={key:0,class:"text-red-500 block text-xs mt-1"},hl={class:"flex gap-4"},bl={class:"flex-1"},xl={key:0,class:"text-red-500 block text-xs mt-1"},_l={class:"flex-1"},yl={key:0,class:"text-red-500 block text-xs mt-1"},wl={class:"w-full flex flex-col"},Cl={class:"flex items-center gap-4"},Dl={key:0,class:"text-red-500 ml-28"},Il={class:"w-full flex flex-col"},kl={class:"flex items-center gap-4"},Vl={key:0,class:"text-red-500 ml-28"},Tl={class:"w-full flex flex-col"},Fl={class:"flex items-center gap-4"},Sl={key:0,class:"text-red-500 ml-28"},Pl={class:"w-full flex flex-col"},Nl={class:"flex items-center gap-4"},El={class:"flex-1"},Ll={key:0,class:"text-red-500 ml-28"},Al={class:"flex gap-4 flex-wrap mt-4 ml-28"},Ul=["src"],Ol=["onClick"],Rl={class:"flex justify-center gap-4 w-full"},jl={class:"flex items-center gap-3"},ql={class:"flex flex-col"},Ml={class:"flex justify-center gap-4 w-full"},$l={class:"flex items-center gap-3"},Bl={class:"flex justify-center gap-3 w-full"},Hl={key:0,class:"flex flex-col items-center justify-center"},zl={class:"flex justify-center items-center w-full h-96"},Gl=["src"],Wl={key:1,class:"text-center text-gray-500 py-8"},Kl={class:"flex justify-center w-full"},te="/api/tours",Se="/storage/tours/",lt={__name:"Tours",setup(Ql){const f=ua(),I=i([]),C=i([]),N=i(""),E=i(""),de=i([]),a=i({id:null,nombre:"",categoria:null,incluye:"",no_incluye:"",cupo_min:null,cupo_max:null,punto_salida:"",fecha_salida:null,fecha_regreso:null,estado:"DISPONIBLE",precio:null,transporte_id:null,imagenes:[]}),D=i([]),U=i([]),O=i([]),ce=i(null),L=i(!1),R=i(!1),j=i(!1),g=i(!1),A=i(!1),S=i(null),b=i({global:{value:null,matchMode:H.CONTAINS},categoria:{value:null,matchMode:H.EQUALS},"transporte.nombre":{value:null,matchMode:H.EQUALS},estado:{value:null,matchMode:H.EQUALS},fecha_salida:{value:null,matchMode:H.DATE_IS}}),G=i(null),q=i(null),W=i(null),k=i(null),V=i(null),se=i(10),Pe=i([5,10,20,50]),K=i("Guardar"),m=i(null),M=i([]),me=i([{label:"Nacional",value:"NACIONAL"},{label:"Internacional",value:"INTERNACIONAL"}]),Ne=i([{label:"Disponible",value:"DISPONIBLE"},{label:"Agotado",value:"AGOTADO"},{label:"En Curso",value:"EN_CURSO"},{label:"Completado",value:"COMPLETADO"},{label:"Cancelado",value:"CANCELADO"},{label:"Suspendido",value:"SUSPENDIDO"},{label:"Reprogramado",value:"REPROGRAMADO"}]),Q=i(!1),$=i([]),ve=i(0),Ee=i(null),oe=ta(()=>{let t=de.value;if(b.value.global.value){const e=b.value.global.value.toLowerCase();t=t.filter(n=>n.nombre.toLowerCase().includes(e)||n.incluye&&n.incluye.toLowerCase().includes(e)||n.no_incluye&&n.no_incluye.toLowerCase().includes(e)||n.punto_salida.toLowerCase().includes(e))}return b.value.categoria.value&&(t=t.filter(e=>e.categoria===b.value.categoria.value)),b.value["transporte.nombre"].value&&(t=t.filter(e=>e["transporte.nombre"]===b.value["transporte.nombre"].value)),b.value.estado.value&&(t=t.filter(e=>e.estado===b.value.estado.value)),(k.value||V.value)&&(t=t.filter(e=>{if(!e.fecha_salida)return!1;const n=new Date(e.fecha_salida);let c=!0;if(k.value){const v=new Date(k.value);c=c&&n>=v}if(V.value){const v=new Date(V.value);v.setHours(23,59,59,999),c=c&&n<=v}return c})),t});sa([a,m,I,C,D,O],()=>{S.value&&L.value&&ie(()=>{const t={...a.value,fecha_regreso:m.value,incluye_lista:[...I.value],no_incluye_lista:[...C.value],imagenes_actuales:[...D.value]},e=JSON.stringify(t)!==JSON.stringify({...S.value,imagenes_actuales:S.value.imagenes_originales})||O.value.length>0,n=!S.value.id,c=a.value.nombre||a.value.punto_salida||a.value.fecha_salida||m.value||a.value.precio||a.value.categoria||a.value.transporte_id||I.value.length>0||C.value.length>0||D.value.length>0;A.value=e||n&&c})},{deep:!0,flush:"post"});function J(){a.value={id:null,nombre:"",categoria:null,incluye:"",no_incluye:"",cupo_min:null,cupo_max:null,punto_salida:"",fecha_salida:null,fecha_regreso:null,estado:"DISPONIBLE",precio:null,transporte_id:null,imagenes:[]},D.value=[],U.value=[],O.value=[],m.value=null,g.value=!1,I.value=[],C.value=[],N.value="",E.value=""}const pe=()=>{N.value.trim()&&(I.value.push(N.value.trim()),N.value="")},Le=t=>{I.value.splice(t,1)},fe=()=>{E.value.trim()&&(C.value.push(E.value.trim()),E.value="")},Ae=t=>{C.value.splice(t,1)},ge=t=>t?t.split("|").filter(e=>e.trim()).map(e=>e.trim()):[],he=t=>t.join("|");oa(()=>{ne(),Ue()});const ne=async()=>{try{const t=await B.get(te);de.value=t.data.map(e=>{var n,c,v;return{...e,imagenes:(e.imagenes||[]).map(y=>typeof y=="string"?y:y.nombre),transporte_nombre:((n=e.transporte)==null?void 0:n.nombre)||"",transporte_capacidad:((c=e.transporte)==null?void 0:c.capacidad)||"","transporte.nombre":(v=e.transporte)==null?void 0:v.nombre}}).sort((e,n)=>{const c=new Date(e.created_at);return new Date(n.created_at)-c})}catch{f.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los tours.",life:4e3})}},Ue=async()=>{try{const t=await B.get("/api/transportes");M.value=t.data||[]}catch{M.value=[],f.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los transportes.",life:4e3})}},Oe=()=>{b.value.categoria.value=G.value},Re=()=>{if(q.value){const t=M.value.find(e=>e.id===q.value);b.value["transporte.nombre"].value=t?t.nombre:null}else b.value["transporte.nombre"].value=null},je=()=>{b.value.estado.value=W.value},be=()=>{if(k.value&&V.value){const t=new Date(k.value),e=new Date(V.value);t>e&&(V.value=null,f.add({severity:"warn",summary:"Fecha ajustada",detail:"La fecha 'hasta' se limpió porque era anterior a la fecha 'desde'.",life:3e3}))}},xe=()=>{if(k.value&&V.value){const t=new Date(k.value);new Date(V.value)<t&&(k.value=null,f.add({severity:"warn",summary:"Fecha ajustada",detail:"La fecha 'desde' se limpió porque era posterior a la fecha 'hasta'.",life:3e3}))}},qe=()=>{G.value=null,q.value=null,W.value=null,k.value=null,V.value=null,b.value.global.value=null,b.value.categoria.value=null,b.value["transporte.nombre"].value=null,b.value.estado.value=null,b.value.fecha_salida.value=null,f.add({severity:"info",summary:"Filtros limpiados",detail:"Se han removido todos los filtros aplicados.",life:3e3})},Me=()=>{J(),K.value="Guardar",g.value=!1,L.value=!0,ie(()=>{S.value={...a.value,fecha_regreso:m.value,incluye_lista:[...I.value],no_incluye_lista:[...C.value],imagenes_originales:[...D.value]},A.value=!1})},$e=t=>{var e;J(),g.value=!1,a.value={...t,transporte_id:((e=t.transporte)==null?void 0:e.id)||t.transporte_id||null},t.fecha_salida&&(typeof t.fecha_salida=="string"?a.value.fecha_salida=new Date(t.fecha_salida):a.value.fecha_salida=t.fecha_salida),t.fecha_regreso&&(typeof t.fecha_regreso=="string"?m.value=new Date(t.fecha_regreso):m.value=t.fecha_regreso),D.value=(t.imagenes||[]).map(n=>typeof n=="string"?n:n.nombre),I.value=ge(t.incluye),C.value=ge(t.no_incluye),A.value=!1,K.value="Actualizar",L.value=!0,ie(()=>{S.value={...a.value,fecha_regreso:m.value,incluye_lista:[...I.value],no_incluye_lista:[...C.value],imagenes_originales:[...D.value]},A.value=!1})},Be=async()=>{if(g.value=!0,!m.value){f.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios estén completos.",life:4e3});return}if(!a.value.nombre||a.value.nombre.length<10||a.value.nombre.length>200){f.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios estén completos y cumplan los requisitos.",life:4e3});return}if(!a.value.punto_salida||a.value.punto_salida.length<5||a.value.punto_salida.length>200){f.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios estén completos y cumplan los requisitos.",life:4e3});return}if(a.value.cupo_min&&a.value.cupo_max&&a.value.cupo_min>=a.value.cupo_max){f.add({severity:"warn",summary:"Verificar datos",detail:"Por favor revisa los valores ingresados y corrige cualquier inconsistencia.",life:4e3});return}if(!X()){f.add({severity:"warn",summary:"Verificar fechas",detail:"Por favor revisa las fechas ingresadas y asegúrate de que sean correctas.",life:4e3});return}if(!Y()){f.add({severity:"warn",summary:"Verificar fechas",detail:"Por favor revisa las fechas ingresadas y asegúrate de que sean correctas.",life:4e3});return}if(!a.value.fecha_salida||!a.value.precio||!a.value.categoria||!a.value.transporte_id||D.value.length===0){f.add({severity:"warn",summary:"Campos requeridos",detail:"Por favor verifica que todos los campos obligatorios estén completos.",life:4e3});return}const t=2*1024*1024;if(U.value.filter(n=>n.size>t).length>0){f.add({severity:"warn",summary:"Verificar archivos",detail:"Por favor revisa el tamaño de las imágenes seleccionadas.",life:4e3});return}try{const n=new FormData;n.append("nombre",a.value.nombre||""),I.value.length>0?n.append("incluye",he(I.value)):n.append("incluye",""),n.append("punto_salida",a.value.punto_salida||""),a.value.fecha_salida instanceof Date?n.append("fecha_salida",a.value.fecha_salida.toISOString().slice(0,19).replace("T"," ")):a.value.fecha_salida&&n.append("fecha_salida",a.value.fecha_salida),m.value instanceof Date?n.append("fecha_regreso",m.value.toISOString().slice(0,19).replace("T"," ")):m.value&&n.append("fecha_regreso",m.value),n.append("precio",a.value.precio||""),n.append("categoria",a.value.categoria||""),n.append("transporte_id",a.value.transporte_id||""),C.value.length>0?n.append("no_incluye",he(C.value)):n.append("no_incluye",""),a.value.cupo_min&&n.append("cupo_min",a.value.cupo_min),a.value.cupo_max&&n.append("cupo_max",a.value.cupo_max),U.value.forEach(v=>n.append("imagenes[]",v)),O.value.forEach(v=>{const y=v.includes("/")?v.split("/").pop():v;n.append("removed_images[]",y)});let c;a.value.id?(n.append("_method","PUT"),c=await B.post(`${te}/${a.value.id}`,n,{headers:{"Content-Type":"multipart/form-data"}}),f.add({severity:"success",summary:"¡Éxito!",detail:"El tour ha sido actualizado correctamente.",life:5e3})):(c=await B.post(te,n,{headers:{"Content-Type":"multipart/form-data"}}),f.add({severity:"success",summary:"¡Éxito!",detail:"El tour ha sido creado correctamente.",life:5e3})),await ne(),L.value=!1,A.value=!1,S.value=null,J()}catch{f.add({severity:"warn",summary:"Error de validación",detail:"Por favor revisa los campos e intenta nuevamente.",life:6e3})}},He=t=>{a.value={...t},R.value=!0},ze=async()=>{try{await B.delete(`${te}/${a.value.id}`),await ne(),R.value=!1,f.add({severity:"success",summary:"¡Eliminado!",detail:"El tour ha sido eliminado correctamente.",life:5e3})}catch{f.add({severity:"error",summary:"Error",detail:"No se pudo eliminar el tour. Inténtalo de nuevo.",life:5e3})}},Ge=()=>{A.value?j.value=!0:_e()},_e=()=>{L.value=!1,j.value=!1,A.value=!1,S.value=null,J()},We=()=>{j.value=!1},Ke=t=>{const e=t.target?t.target.files:t.files,n=2*1024*1024;for(const c of e)if(c instanceof File){if(c.size>n){f.add({severity:"warn",summary:"Archivo no válido",detail:"Por favor selecciona archivos que cumplan con los requisitos de tamaño (máximo 2MB).",life:5e3});continue}if(!c.type.startsWith("image/")){f.add({severity:"warn",summary:"Formato no válido",detail:"Por favor selecciona únicamente archivos de imagen válidos.",life:4e3});continue}U.value.push(c);const v=new FileReader;v.onload=y=>D.value.push(y.target.result),v.readAsDataURL(c)}},Qe=t=>{const e=D.value[t];typeof e=="string"&&e.startsWith("data:image")?(D.value.splice(t,1),U.value.splice(t,1)):(O.value.push(e),D.value.splice(t,1))},Je=t=>{$.value=(t||[]).map(e=>Se+(typeof e=="string"?e:e.nombre)),Q.value=!0},Xe=()=>{a.value.nombre&&a.value.nombre.length>200&&(a.value.nombre=a.value.nombre.substring(0,200))},Ye=()=>{a.value.punto_salida&&a.value.punto_salida.length>200&&(a.value.punto_salida=a.value.punto_salida.substring(0,200))},ye=()=>a.value.cupo_min&&!a.value.cupo_max||a.value.cupo_max&&!a.value.cupo_min?!0:!(a.value.cupo_min&&a.value.cupo_max&&a.value.cupo_min>=a.value.cupo_max),X=()=>{if(!a.value.fecha_salida)return!0;const t=new Date,e=new Date(a.value.fecha_salida),n=new Date(t.getTime()+60*60*1e3);return!(e<n||m.value&&(new Date(m.value)-e)/(1e3*60*60)<1)},Y=()=>{if(!m.value)return!0;const t=new Date(m.value);if(a.value.fecha_salida){const e=new Date(a.value.fecha_salida);if((t-e)/(1e3*60*60)<1)return!1}return!0},we=()=>{const t=new Date;return t.setHours(t.getHours()+1),t},Ze=()=>{if(!a.value.fecha_salida)return we();const t=new Date(a.value.fecha_salida);return t.setHours(t.getHours()+1),t},ea=()=>{if(!m.value)return null;const t=new Date(m.value);return t.setHours(t.getHours()-1),t};return(t,e)=>{const n=P("Toast"),c=P("InputText"),v=P("Select"),y=P("Column"),aa=P("DataTable"),re=P("InputNumber"),Z=P("Dialog"),la=P("Carousel");return d(),u(ee,null,[o(r(na),{title:"Tours"}),o(ia,null,{default:p(()=>[o(n,{class:"z-[9999]"}),l("div",fa,[l("div",ga,[e[29]||(e[29]=l("h3",{class:"text-lg sm:text-2xl text-blue-600 font-bold"},"Catálogo de Tours",-1)),l("div",ha,[o(r(ra),{href:t.route("transportes"),class:"bg-blue-500 border border-blue-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300"},{default:p(()=>[o(r(h),{icon:r(da),class:"h-4"},null,8,["icon"]),e[27]||(e[27]=l("span",null," Control Transportes",-1))]),_:1,__:[27]},8,["href"]),l("button",{class:"bg-red-500 border border-red-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:Me},[o(r(h),{icon:r(le),class:"h-4 w-4 text-white"},null,8,["icon"]),e[28]||(e[28]=l("span",null," Agregar tour",-1))])])]),o(aa,{value:oe.value,selection:ce.value,"onUpdate:selection":e[6]||(e[6]=s=>ce.value=s),dataKey:"id",paginator:!0,rows:se.value,rowsPerPageOptions:Pe.value,rowsPerPage:se.value,"onUpdate:rowsPerPage":e[7]||(e[7]=s=>se.value=s),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} tours",class:"overflow-x-auto max-w-full",style:{display:"block","max-width":"84vw"},responsiveLayout:"scroll",pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:p(()=>[l("div",ba,[l("div",xa,[l("div",_a,[e[30]||(e[30]=l("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[l("i",{class:"pi pi-filter text-blue-600 text-sm"}),l("span",null,"Filtros")],-1)),l("div",ya,_(oe.value.length)+" resultado"+_(oe.value.length!==1?"s":""),1)]),l("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md",onClick:qe},[o(r(h),{icon:r(va),class:"h-4 w-4 text-white"},null,8,["icon"]),e[31]||(e[31]=l("span",null," Limpiar filtros",-1))])]),l("div",wa,[l("div",null,[o(c,{modelValue:b.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=s=>b.value.global.value=s),placeholder:"🔍 Buscar tours...",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])]),l("div",Ca,[l("div",null,[o(v,{modelValue:G.value,"onUpdate:modelValue":e[1]||(e[1]=s=>G.value=s),options:me.value,optionLabel:"label",optionValue:"value",placeholder:"Categoría",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"},onChange:Oe,clearable:!0},null,8,["modelValue","options"])]),l("div",null,[o(v,{modelValue:q.value,"onUpdate:modelValue":e[2]||(e[2]=s=>q.value=s),options:M.value,optionLabel:"nombre",optionValue:"id",placeholder:"Transporte",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"},onChange:Re,clearable:!0},null,8,["modelValue","options"])]),l("div",null,[o(v,{modelValue:W.value,"onUpdate:modelValue":e[3]||(e[3]=s=>W.value=s),options:Ne.value,optionLabel:"label",optionValue:"value",placeholder:"Estado",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"},onChange:je,clearable:!0},null,8,["modelValue","options"])]),l("div",Da,[o(r(ae),{modelValue:k.value,"onUpdate:modelValue":e[4]||(e[4]=s=>k.value=s),placeholder:"Fecha desde",class:"w-full h-9 text-sm",onDateSelect:be,onClear:be,showIcon:!0,dateFormat:"dd/mm/yy",maxDate:V.value},null,8,["modelValue","maxDate"])]),l("div",Ia,[o(r(ae),{modelValue:V.value,"onUpdate:modelValue":e[5]||(e[5]=s=>V.value=s),placeholder:"Fecha hasta",class:"w-full h-9 text-sm",onDateSelect:xe,onClear:xe,showIcon:!0,dateFormat:"dd/mm/yy",minDate:k.value},null,8,["modelValue","minDate"])])])])])]),default:p(()=>[o(y,{field:"nombre",header:"Nombre",sortable:"",class:"w-44 min-w-44"},{body:p(s=>[l("div",ka,_(s.data.nombre),1)]),_:1}),o(y,{field:"incluye",header:"Incluye",class:"w-40 min-w-40"},{body:p(s=>[l("div",Va,_(s.data.incluye),1)]),_:1}),o(y,{field:"no_incluye",header:"No incluye",class:"w-40 min-w-40"},{body:p(s=>[l("div",Ta,_(s.data.no_incluye),1)]),_:1}),o(y,{field:"punto_salida",header:"Punto salida",class:"w-32 min-w-32"},{body:p(s=>[l("div",Fa,_(s.data.punto_salida),1)]),_:1}),o(y,{field:"fecha_salida",header:"Fecha salida",class:"w-36 min-w-36"},{body:p(s=>[l("div",Sa,_(s.data.fecha_salida?new Date(s.data.fecha_salida).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):""),1)]),_:1}),o(y,{field:"precio",header:"Precio",class:"w-24 min-w-24"},{body:p(s=>[l("div",Pa,_(isNaN(Number(s.data.precio))?"":`$${Number(s.data.precio).toFixed(2)}`),1)]),_:1}),o(y,{exportable:!1,class:"w-56 min-w-56"},{header:p(()=>e[32]||(e[32]=[l("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:p(s=>[l("div",Na,[l("button",{class:"bg-orange-200/30 border py-2 px-1 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:T=>$e(s.data)},[o(r(h),{icon:r(Ve),class:"h-4 w-4 text-orange-600"},null,8,["icon"]),e[33]||(e[33]=w("  Editar "))],8,Ea),l("button",{class:"bg-blue-200/50 border py-2 px-1 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:T=>Je(s.data.imagenes)},[o(r(h),{icon:r(ca),class:"h-4 w-4 text-blue-600"},null,8,["icon"]),e[34]||(e[34]=w("  Imgs "))],8,La),l("button",{class:"bg-red-200/30 border py-2 px-1 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:T=>He(s.data)},[o(r(h),{icon:r(ma),class:"h-4 w-4 text-red-600"},null,8,["icon"]),e[35]||(e[35]=w("  Eliminar "))],8,Aa)])]),_:1})]),_:1},8,["value","selection","rows","rowsPerPageOptions","rowsPerPage"]),o(Z,{visible:L.value,"onUpdate:visible":e[20]||(e[20]=s=>L.value=s),header:K.value+" Tour",modal:!0,style:{width:"500px"},closable:!1},{footer:p(()=>[l("div",Rl,[l("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Ge},[o(r(h),{icon:r(z),class:"h-5 text-green-600"},null,8,["icon"]),e[50]||(e[50]=w("Cancelar "))]),l("button",{class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Be},[o(r(h),{icon:r(Te),class:"h-5 text-white"},null,8,["icon"]),w(_(K.value),1)])])]),default:p(()=>[l("div",Ua,[l("div",Oa,[l("div",Ra,[e[36]||(e[36]=l("label",{for:"nombre",class:"w-24 flex items-center gap-1"},[w("Tour: "),l("span",{class:"text-red-500 font-bold"},"*")],-1)),o(c,{modelValue:a.value.nombre,"onUpdate:modelValue":e[8]||(e[8]=s=>a.value.nombre=s),modelModifiers:{trim:!0},id:"nombre",name:"nombre",maxlength:200,class:F([{"p-invalid":g.value&&(!a.value.nombre||a.value.nombre.length<10||a.value.nombre.length>200)},"flex-1"]),onInput:Xe},null,8,["modelValue","class"])]),a.value.nombre&&a.value.nombre.length<10?(d(),u("small",ja," El nombre debe tener al menos 10 caracteres. Actual: "+_(a.value.nombre.length)+"/10 ",1)):x("",!0),a.value.nombre&&a.value.nombre.length>=180&&a.value.nombre.length<=200?(d(),u("small",qa," Caracteres restantes: "+_(200-a.value.nombre.length),1)):x("",!0),g.value&&!a.value.nombre?(d(),u("small",Ma," El nombre es obligatorio. ")):x("",!0)]),l("div",$a,[l("div",Ba,[e[37]||(e[37]=l("label",{for:"incluye",class:"w-24 flex items-center gap-1 mt-2"}," Incluye: ",-1)),l("div",Ha,[l("div",za,[De(l("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>N.value=s),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyup:Ie(pe,["enter"])},null,544),[[ke,N.value]]),l("button",{type:"button",onClick:pe,disabled:!N.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[o(r(h),{icon:r(le),class:"h-5"},null,8,["icon"])],8,Ga)]),l("div",Wa,[(d(!0),u(ee,null,ue(I.value,(s,T)=>(d(),u("div",{key:T,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[l("span",Ka,_(s),1),l("button",{type:"button",onClick:Ce=>Le(T),class:"text-red-500 hover:text-red-700 p-1"},[o(r(h),{icon:r(z),class:"h-5"},null,8,["icon"])],8,Qa)]))),128))]),I.value.length===0?(d(),u("div",Ja," Sin elementos agregados. ")):x("",!0)])])]),l("div",Xa,[l("div",Ya,[e[38]||(e[38]=l("label",{for:"no_incluye",class:"w-24 mt-2"},"No incluye:",-1)),l("div",Za,[l("div",el,[De(l("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>E.value=s),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyup:Ie(fe,["enter"])},null,544),[[ke,E.value]]),l("button",{type:"button",onClick:fe,disabled:!E.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},[o(r(h),{icon:r(le),class:"h-5"},null,8,["icon"])],8,al)]),C.value.length>0?(d(),u("div",ll,[(d(!0),u(ee,null,ue(C.value,(s,T)=>(d(),u("div",{key:T,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[l("span",tl,_(s),1),l("button",{type:"button",onClick:Ce=>Ae(T),class:"text-red-500 hover:text-red-700 p-1"},[o(r(h),{icon:r(z),class:"h-5"},null,8,["icon"])],8,sl)]))),128))])):x("",!0),C.value.length===0?(d(),u("div",ol," Sin elementos agregados. ")):x("",!0)])])]),l("div",nl,[l("div",rl,[e[39]||(e[39]=l("label",{for:"punto_salida",class:"w-24 flex items-center gap-1"},[w("Punto salida:"),l("span",{class:"text-red-500 font-bold"},"*")],-1)),o(c,{modelValue:a.value.punto_salida,"onUpdate:modelValue":e[11]||(e[11]=s=>a.value.punto_salida=s),modelModifiers:{trim:!0},id:"punto_salida",name:"punto_salida",maxlength:200,class:F([{"p-invalid":g.value&&(!a.value.punto_salida||a.value.punto_salida.length<5)},"flex-1"]),onInput:Ye},null,8,["modelValue","class"])]),a.value.punto_salida&&a.value.punto_salida.length<5?(d(),u("small",il,"Debe tener al menos 5 caracteres. Actual: "+_(a.value.punto_salida.length)+"/5",1)):x("",!0),a.value.punto_salida&&a.value.punto_salida.length>=180&&a.value.punto_salida.length<=200?(d(),u("small",ul,"Caracteres restantes: "+_(200-a.value.punto_salida.length),1)):x("",!0),g.value&&!a.value.punto_salida?(d(),u("small",dl,"El punto de salida es obligatorio.")):x("",!0),g.value&&a.value.punto_salida&&a.value.punto_salida.length<5?(d(),u("small",cl,"El punto de salida debe tener al menos 5 caracteres.")):x("",!0)]),l("div",ml,[l("div",vl,[e[40]||(e[40]=l("label",{for:"cupo_min",class:"block mb-2"},"Cupo mínimo:",-1)),o(re,{modelValue:a.value.cupo_min,"onUpdate:modelValue":e[12]||(e[12]=s=>a.value.cupo_min=s),id:"cupo_min",name:"cupo_min",min:1,max:a.value.cupo_max?a.value.cupo_max-1:50,step:1,showButtons:"",useGrouping:!1,class:F([{"p-invalid":a.value.cupo_min&&a.value.cupo_max&&a.value.cupo_min>=a.value.cupo_max},"w-full"]),onInput:ye,placeholder:"0"},null,8,["modelValue","max","class"]),a.value.cupo_min&&a.value.cupo_max&&a.value.cupo_min>=a.value.cupo_max?(d(),u("small",pl,"Debe ser menor al máximo")):x("",!0)]),l("div",fl,[e[41]||(e[41]=l("label",{for:"cupo_max",class:"block mb-2"},"Cupo máximo:",-1)),o(re,{modelValue:a.value.cupo_max,"onUpdate:modelValue":e[13]||(e[13]=s=>a.value.cupo_max=s),id:"cupo_max",name:"cupo_max",min:a.value.cupo_min?a.value.cupo_min+1:1,max:100,step:1,showButtons:"",useGrouping:!1,class:F([{"p-invalid":a.value.cupo_min&&a.value.cupo_max&&a.value.cupo_max<=a.value.cupo_min},"w-full"]),onInput:ye,placeholder:"0"},null,8,["modelValue","min","class"]),a.value.cupo_min&&a.value.cupo_max&&a.value.cupo_max<=a.value.cupo_min?(d(),u("small",gl,"Debe ser mayor al mínimo")):x("",!0)])]),l("div",hl,[l("div",bl,[e[42]||(e[42]=l("label",{for:"fecha_salida",class:"flex items-center gap-1 mb-2"},[w("Fecha y hora de salida:"),l("span",{class:"text-red-500 font-bold"},"*")],-1)),o(r(ae),{modelValue:a.value.fecha_salida,"onUpdate:modelValue":e[14]||(e[14]=s=>a.value.fecha_salida=s),id:"fecha_salida",name:"fecha_salida",showIcon:"",showTime:"",hourFormat:"12",dateFormat:"yy-mm-dd",minDate:we(),maxDate:ea(),class:F([{"p-invalid":g.value&&!a.value.fecha_salida||a.value.fecha_salida&&!X()},"w-full"]),manualInput:!1,onDateSelect:X,onInput:X},null,8,["modelValue","minDate","maxDate","class"]),g.value&&!a.value.fecha_salida?(d(),u("small",xl,"Fecha y hora de salida requerida.")):x("",!0)]),l("div",_l,[e[43]||(e[43]=l("label",{for:"horaRegresoCalendar",class:"flex items-center gap-1 mb-2"},[w("Fecha y hora regreso:"),l("span",{class:"text-red-500 font-bold"},"*")],-1)),o(r(ae),{modelValue:m.value,"onUpdate:modelValue":e[15]||(e[15]=s=>m.value=s),id:"horaRegresoCalendar",name:"horaRegresoCalendar",showIcon:"",showTime:"",hourFormat:"12",dateFormat:"yy-mm-dd",minDate:Ze(),manualInput:!1,class:F([{"p-invalid":g.value&&!m.value||m.value&&!Y()},"w-full"]),onDateSelect:Y,onInput:Y},null,8,["modelValue","minDate","class"]),g.value&&!m.value?(d(),u("small",yl,"Fecha y hora de regreso requerida.")):x("",!0)])]),l("div",wl,[l("div",Cl,[e[44]||(e[44]=l("label",{for:"precio",class:"w-24 flex items-center gap-1"},[w("Precio:"),l("span",{class:"text-red-500 font-bold"},"*")],-1)),o(re,{modelValue:a.value.precio,"onUpdate:modelValue":e[16]||(e[16]=s=>a.value.precio=s),id:"precio",name:"precio",mode:"currency",currency:"USD",locale:"en-US",min:.01,max:999.99,maxFractionDigits:2,minFractionDigits:2,class:F([{"p-invalid":g.value&&(!a.value.precio||a.value.precio<=0||a.value.precio>999.99)},"flex-1"]),placeholder:"$0.00"},null,8,["modelValue","class"])]),g.value&&(a.value.precio==null||a.value.precio<=0||a.value.precio>999.99)?(d(),u("small",Dl,"El precio es obligatorio, debe ser mayor a 0 y menor o igual a 999.99.")):x("",!0)]),l("div",Il,[l("div",kl,[e[45]||(e[45]=l("label",{for:"categoria",class:"w-24 flex items-center gap-1"},[w("Categoría:"),l("span",{class:"text-red-500 font-bold"},"*")],-1)),o(v,{modelValue:a.value.categoria,"onUpdate:modelValue":e[17]||(e[17]=s=>a.value.categoria=s),options:me.value,optionLabel:"label",optionValue:"value",id:"categoria",name:"categoria",class:F(["flex-1",{"p-invalid":g.value&&!a.value.categoria}]),placeholder:"Selecciona una categoría"},null,8,["modelValue","options","class"])]),g.value&&!a.value.categoria?(d(),u("small",Vl,"La categoría es obligatoria.")):x("",!0)]),l("div",Tl,[l("div",Fl,[e[46]||(e[46]=l("label",{for:"transporte_id",class:"w-24 flex items-center gap-1"},[w("Transporte:"),l("span",{class:"text-red-500 font-bold"},"*")],-1)),o(v,{modelValue:a.value.transporte_id,"onUpdate:modelValue":e[18]||(e[18]=s=>a.value.transporte_id=s),options:M.value,optionLabel:"nombre",optionValue:"id",id:"transporte_id",name:"transporte_id",class:F(["flex-1",{"p-invalid":g.value&&!a.value.transporte_id}]),placeholder:"Selecciona un tipo de transporte"},null,8,["modelValue","options","class"])]),g.value&&!a.value.transporte_id?(d(),u("small",Sl,"El tipo de transporte es obligatorio.")):x("",!0)]),l("div",Pl,[l("div",Nl,[e[48]||(e[48]=l("label",{for:"imagenes",class:"w-24 flex items-center gap-1"},[w("Imágenes:"),l("span",{class:"text-red-500 font-bold"},"*")],-1)),l("div",El,[l("input",{type:"file",id:"imagenes",name:"imagenes[]",accept:"image/*",multiple:"",onChange:Ke,class:"hidden",ref_key:"fileInput",ref:Ee},null,544),l("button",{type:"button",class:"bg-white hover:bg-red-50 text-red-500 hover:text-red-600 border border-red-500 hover:border-red-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2 outline-none focus:outline-none active:outline-none",onClick:e[19]||(e[19]=s=>t.$refs.fileInput.click())},[o(r(h),{icon:r(le),class:"h-4"},null,8,["icon"]),e[47]||(e[47]=l("span",null,"Subir imágenes",-1))])])]),g.value&&D.value.length===0?(d(),u("small",Ll,"Las imágenes son obligatorias (al menos una).")):x("",!0)]),l("div",Al,[(d(!0),u(ee,null,ue(D.value,(s,T)=>(d(),u("div",{key:T,class:"relative w-32 h-32"},[l("img",{src:s.startsWith("data:image")?s:Se+s,alt:"Vista previa",class:"w-full h-full object-cover rounded border"},null,8,Ul),l("button",{onClick:Ce=>Qe(T),class:"absolute top-2 right-2 bg-gray-600/80 hover:bg-gray-700/80 text-white font-bold py-1 px-2 rounded-full shadow",style:{transform:"translate(50%, -50%)"}},e[49]||(e[49]=[l("i",{class:"pi pi-times text-xs"},null,-1)]),8,Ol)]))),128))])])]),_:1},8,["visible","header"]),o(Z,{visible:R.value,"onUpdate:visible":e[22]||(e[22]=s=>R.value=s),header:"Eliminar tour",modal:!0,style:{width:"350px"},closable:!1},{footer:p(()=>[l("div",Ml,[l("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[21]||(e[21]=s=>R.value=!1)},[o(r(h),{icon:r(z),class:"h-5"},null,8,["icon"]),e[54]||(e[54]=l("span",null,"No",-1))]),l("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:ze},[o(r(h),{icon:r(Te),class:"h-5"},null,8,["icon"]),e[55]||(e[55]=l("span",null,"Sí",-1))])])]),default:p(()=>[l("div",jl,[o(r(h),{icon:r(Fe),class:"h-8 w-8 text-red-500"},null,8,["icon"]),l("div",ql,[l("span",null,[e[51]||(e[51]=w("¿Estás seguro de eliminar el tour: ")),l("b",null,_(a.value.nombre),1),e[52]||(e[52]=w("?"))]),e[53]||(e[53]=l("span",{class:"text-red-600 text-sm font-medium mt-1"},"Esta acción es irreversible.",-1))])])]),_:1},8,["visible"]),o(Z,{visible:j.value,"onUpdate:visible":e[23]||(e[23]=s=>j.value=s),header:"Cambios sin guardar",modal:!0,style:{width:"400px"},closable:!1},{footer:p(()=>[l("div",Bl,[l("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:We},[o(r(h),{icon:r(Ve),class:"h-4"},null,8,["icon"]),e[57]||(e[57]=l("span",null,"Continuar",-1))]),l("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:_e},[o(r(h),{icon:r(pa),class:"h-4"},null,8,["icon"]),e[58]||(e[58]=l("span",null,"Salir sin guardar",-1))])])]),default:p(()=>[l("div",$l,[o(r(h),{icon:r(Fe),class:"h-8 w-8 text-red-500"},null,8,["icon"]),e[56]||(e[56]=l("div",{class:"flex flex-col"},[l("span",null,"¡Tienes información sin guardar!"),l("span",{class:"text-red-600 text-sm font-medium mt-1"},"¿Deseas salir sin guardar?")],-1))])]),_:1},8,["visible"]),o(Z,{visible:Q.value,"onUpdate:visible":e[26]||(e[26]=s=>Q.value=s),header:"Imágenes del tour",modal:!0,closable:!1,style:{width:"700px"}},{footer:p(()=>[l("div",Kl,[l("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[25]||(e[25]=s=>Q.value=!1)},[o(r(h),{icon:r(z),class:"h-5"},null,8,["icon"]),e[59]||(e[59]=l("span",null,"Cerrar",-1))])])]),default:p(()=>[$.value.length?(d(),u("div",Hl,[o(la,{value:$.value,numVisible:1,numScroll:1,circular:!0,page:ve.value,"onUpdate:page":e[24]||(e[24]=s=>ve.value=s),class:"w-full",showIndicators:$.value.length>1,showNavigators:$.value.length>1,style:{"max-width":"610px"}},{item:p(s=>[l("div",zl,[l("img",{src:s.data,alt:"Imagen tour",class:"w-auto h-full max-h-96 object-contain rounded shadow"},null,8,Gl)])]),_:1},8,["value","page","showIndicators","showNavigators"])])):(d(),u("div",Wl,"No hay imágenes para este tour."))]),_:1},8,["visible"])])]),_:1})],64)}}};export{lt as default};
