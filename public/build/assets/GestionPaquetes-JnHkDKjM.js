import{r,E as Xe,o as Ye,N as U,w as j,n as de,c as u,d as c,p as n,$ as o,a0 as Ze,x as v,e as a,t as y,F as E,l as Q,q as h,j as S,v as ue,D as ce,a5 as ve,y as ea}from"./vendor-BOi6Gr0G.js";import{A as aa}from"./AuthenticatedLayout-ySbiGZ3w.js";import{z as la,F as ae,a as sa,A as d,e as ta,f as L,h as we,D as me,g as le,p as _e,m as oa,o as ia}from"./ui-BibPgP1I.js";import{a as X,b as Ce,j as na,c as ra,i as da,d as R,e as De,g as ke,h as ua}from"./index-Btbp3Gjs.js";import"./logo-DN1bLr27.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ca={class:"py-4 sm:py-6 px-4 sm:px-7 mt-6 sm:mt-10 mx-auto bg-red-50 shadow-md rounded-lg h-screen-full"},va={class:"flex flex-col lg:flex-row lg:justify-between lg:items-center mb-4 gap-4"},ma={class:"bg-blue-50 p-3 rounded-lg shadow-sm border mb-4"},pa={class:"flex items-center justify-between mb-3"},fa={class:"flex items-center gap-3"},ga={class:"bg-blue-50 border border-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium"},ba={class:"space-y-3"},ha={class:"grid grid-cols-3 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-5 gap-3"},xa={class:"text-sm font-medium leading-relaxed"},ya={class:"text-sm leading-relaxed whitespace-normal ps-3 mb-0"},wa={class:"text-sm leading-relaxed"},_a={class:"text-sm leading-relaxed"},Ca={class:"text-sm leading-relaxed"},Da={class:"text-sm font-medium leading-relaxed"},ka={class:"flex gap-1 justify-center items-center w-64"},Pa=["onClick"],Ia=["onClick"],Fa=["onClick"],Va={class:"space-y-4"},qa={class:"w-full flex flex-col"},Sa={class:"flex items-center gap-4"},La={key:0,class:"text-red-500 ml-28"},$a={class:"w-full flex flex-col"},Aa={class:"flex items-start gap-4"},Na={class:"flex-1"},Ua={class:"flex gap-2 mb-3"},ja=["disabled"],Ea={class:"space-y-2 max-h-40 overflow-y-auto"},Ra={class:"flex-1"},Ta=["onClick"],Ma={key:0,class:"text-gray-500 text-sm mt-2"},za={class:"w-full flex flex-col"},Ha={class:"flex items-start gap-4"},Ba={class:"flex-1"},Oa={class:"flex gap-2 mb-3"},Ka=["disabled"],Wa={class:"space-y-2 max-h-40 overflow-y-auto"},Ga={class:"flex-1"},Ja=["onClick"],Qa={key:0,class:"text-gray-500 text-sm mt-2"},Xa={class:"w-full flex flex-col"},Ya={class:"flex items-start gap-4"},Za={class:"flex-1"},el={class:"flex gap-2 mb-3"},al=["disabled"],ll={class:"space-y-2 max-h-40 overflow-y-auto"},sl={class:"flex-1"},tl=["onClick"],ol={key:0,class:"text-gray-500 text-sm mt-2"},il={class:"flex gap-4"},nl={class:"w-full flex flex-col"},rl={class:"flex items-center gap-4"},dl={key:0,class:"text-red-500 ml-28"},ul={class:"flex gap-4"},cl={class:"flex-1"},vl={class:"flex-1"},ml={class:"w-full flex flex-col"},pl={class:"flex items-center gap-4"},fl={key:0,class:"text-red-500 ml-28"},gl={class:"w-full flex flex-col"},bl={class:"flex items-center gap-4"},hl={class:"flex-1"},xl={key:0,class:"text-red-500 ml-28"},yl={class:"flex gap-4 flex-wrap mt-4 ml-28"},wl=["src"],_l=["onClick"],Cl={class:"flex justify-center gap-4 w-full"},Dl={class:"flex items-center gap-3"},kl={class:"flex flex-col"},Pl={class:"flex justify-center gap-4 w-full"},Il={class:"flex items-center gap-3"},Fl={class:"flex justify-center gap-3 w-full"},Vl={key:0,class:"flex flex-col items-center justify-center"},ql={class:"flex justify-center items-center w-full h-96"},Sl=["src"],Ll={key:1,class:"text-center text-gray-500 py-8"},$l={class:"flex justify-center w-full"},se="/api/paquetes",Ml={__name:"GestionPaquetes",setup(Al){const k=r([]),P=r(""),pe=()=>{P.value.trim()&&(k.value.push(P.value.trim()),P.value="")},Pe=s=>{k.value.splice(s,1)},I=r([]),F=r(""),fe=()=>{F.value.trim()&&(I.value.push(F.value.trim()),F.value="")},Ie=s=>{I.value.splice(s,1)},m=la(),ge=r([]),t=r({id:null,nombre:"",incluye:"",condiciones:"",recordatorio:"",precio:null,pais_id:null,provincia_id:null,fecha_salida:null,fecha_regreso:null,imagenes:[]}),w=r([]),V=r(""),x=r([]),T=r([]),M=r([]),q=r(!1),z=r(!1),H=r(!1),$=r(!1),A=r(!1),N=r(null),f=r({global:{value:null,matchMode:ae.CONTAINS},pais_id:{value:null,matchMode:ae.EQUALS},provincia_id:{value:null,matchMode:ae.EQUALS},fecha_salida:{value:null,matchMode:ae.DATE_IS}}),B=r(null),O=r(null),_=r(null),C=r(null),te=r(10),Fe=r([5,10,20,50]),Y=r("Guardar"),K=r([]),D=r([]),Z=r(!1),W=r([]),be=r(0),Ve=r(null),oe=Xe(()=>{let s=ge.value.slice().sort((e,l)=>{const i=new Date(e.created_at||e.fecha_salida||0);return new Date(l.created_at||l.fecha_salida||0)-i});if(f.value.global.value){const e=f.value.global.value.toLowerCase();s=s.filter(l=>{var i,g,p,J;return((i=l.nombre)==null?void 0:i.toLowerCase().includes(e))||((g=l.incluye)==null?void 0:g.toLowerCase().includes(e))||((p=l.condiciones)==null?void 0:p.toLowerCase().includes(e))||((J=l.recordatorio)==null?void 0:J.toLowerCase().includes(e))})}return f.value.pais_id.value&&(s=s.filter(e=>e.pais_id==f.value.pais_id.value)),f.value.provincia_id.value&&(s=s.filter(e=>e.provincia_id==f.value.provincia_id.value)),(_.value||C.value)&&(s=s.filter(e=>{if(!e.fecha_salida)return!1;const l=new Date(e.fecha_salida);let i=!0;if(_.value){const g=new Date(_.value);i=i&&l>=g}if(C.value){const g=new Date(C.value);g.setHours(23,59,59,999),i=i&&l<=g}return i})),s}),he=()=>{const s=new Date;return s.setHours(s.getHours()+1),s},qe=()=>{if(!t.value.fecha_salida)return he();const s=new Date(t.value.fecha_salida);return s.setHours(s.getHours()+1),s},Se=()=>{if(!t.value.fecha_regreso)return null;const s=new Date(t.value.fecha_regreso);return s.setHours(s.getHours()-1),s},Le=()=>{if(!t.value.fecha_salida)return!0;const s=new Date,e=new Date(t.value.fecha_salida),l=new Date(s.getTime()+60*60*1e3);return!(e<l||t.value.fecha_regreso&&(new Date(t.value.fecha_regreso)-e)/(1e3*60*60)<1)},$e=()=>{if(!t.value.fecha_regreso)return!0;const s=new Date(t.value.fecha_regreso);if(t.value.fecha_salida){const e=new Date(t.value.fecha_salida);if((s-e)/(1e3*60*60)<1)return!1}return!0},Ae=()=>{if(_.value&&C.value){const s=new Date(_.value),e=new Date(C.value);s>e&&(C.value=null,m.add({severity:"warn",summary:"Fecha ajustada",detail:"La fecha 'hasta' se limpió porque era anterior a la fecha 'desde'.",life:3e3}))}},Ne=()=>{if(_.value&&C.value){const s=new Date(_.value);new Date(C.value)<s&&(_.value=null,m.add({severity:"warn",summary:"Fecha ajustada",detail:"La fecha 'desde' se limpió porque era posterior a la fecha 'hasta'.",life:3e3}))}};Ye(async()=>{B.value=null,O.value=null,_.value=null,C.value=null,f.value.global.value=null,f.value.pais_id.value=null,f.value.provincia_id.value=null,f.value.fecha_salida.value=null,await ie(),await Ue()});const ie=async()=>{const{data:s}=await U.get(se),e=Array.isArray(s)?s:s.data||s.paquetes||[];ge.value=e.map(l=>({...l,pais:l.pais||(l.pais_id?K.value.find(i=>i.id===l.pais_id):null),provincia:l.provincia||(l.provincia_id?D.value.find(i=>i.id===l.provincia_id):null),imagenes:(l.imagenes||[]).map(i=>typeof i=="string"?i:i.nombre)}))},Ue=async()=>{const{data:s}=await U.get("/api/paises");K.value=s},G=async s=>{const{data:e}=await U.get(`/api/provincias?pais_id=${s}`);D.value=e};j(()=>t.value.pais_id,s=>{s?(D.value=[],t.value.provincia_id=null,G(s)):(D.value=[],t.value.provincia_id=null)});function ne(){t.value={id:null,nombre:"",incluye:"",condiciones:"",recordatorio:"",precio:null,pais_id:null,provincia_id:null,fecha_salida:null,fecha_regreso:null,imagenes:[]},x.value=[],T.value=[],M.value=[],w.value=[],V.value="",k.value=[],P.value="",I.value=[],F.value="",$.value=!1}function je(){ne(),Y.value="Guardar",t.value.pais_id?G(t.value.pais_id):K.value.length>0?(t.value.pais_id=K.value[0].id,G(t.value.pais_id)):D.value=[],q.value=!0,de(()=>{N.value={...t.value,incluye_lista:[...w.value],imagenes_originales:[...x.value]},A.value=!1})}function Ee(s){ne(),t.value={...s},w.value=ee(s.incluye),k.value=ee(s.condiciones),I.value=ee(s.recordatorio),x.value=(s.imagenes||[]).map(e=>typeof e=="string"?e:e.nombre),Y.value="Actualizar",s.pais_id?G(s.pais_id).then(()=>{t.value.provincia_id=s.provincia_id}):D.value=[],q.value=!0,de(()=>{N.value={...t.value,incluye_lista:[...w.value],imagenes_originales:[...x.value]},A.value=!1})}const Re=()=>{A.value?H.value=!0:xe()},xe=()=>{q.value=!1,H.value=!1,A.value=!1,originalTourData.value=null,ne()},Te=()=>{H.value=!1},ye=()=>{V.value.trim()&&(w.value.push(V.value.trim()),V.value="")},Me=s=>{w.value.splice(s,1)},ee=s=>s?s.split("|").filter(e=>e.trim()).map(e=>e.trim()):[],re=s=>s.join("|"),ze=s=>{const e=s.target?s.target.files:s.files,l=2*1024*1024;for(const i of e)if(i instanceof File){if(i.size>l){m.add({severity:"warn",summary:"Archivo no válido",detail:"Máximo 2MB por imagen.",life:5e3});continue}if(!i.type.startsWith("image/")){m.add({severity:"warn",summary:"Formato no válido",detail:"Solo imágenes válidas.",life:4e3});continue}T.value.push(i);const g=new FileReader;g.onload=p=>x.value.push(p.target.result),g.readAsDataURL(i)}},He=s=>{const e=x.value[s];typeof e=="string"&&e.startsWith("data:image")?(x.value.splice(s,1),T.value.splice(s,1)):(M.value.push(e),x.value.splice(s,1))};function Be(s){W.value=(s||[]).map(e=>"/storage/"+(typeof e=="string"?e:e.nombre)),Z.value=!0}const Oe=async()=>{if($.value=!0,!t.value.nombre||t.value.nombre.length<6||t.value.nombre.length>100){m.add({severity:"warn",summary:"Campos requeridos",detail:"El nombre debe tener entre 6 y 100 caracteres.",life:4e3});return}if(!t.value.fecha_salida||!t.value.fecha_regreso){m.add({severity:"warn",summary:"Campos requeridos",detail:"Debes ingresar las fechas de salida y regreso.",life:4e3});return}if(!Le()||!$e()){m.add({severity:"warn",summary:"Verifica las fechas",detail:"La fecha de salida debe ser futura y la de regreso posterior a la salida (mínimo 1 hora).",life:4e3});return}if(!t.value.precio||t.value.precio<=0||t.value.precio>999999.99){m.add({severity:"warn",summary:"Precio inválido",detail:"El precio debe ser mayor a 0 y menor o igual a 9999.99.",life:4e3});return}const s=w.value.filter(b=>b.trim()!=="");if(s.length===0){m.add({severity:"warn",summary:"Campos requeridos",detail:"Debes agregar al menos un elemento en Incluye.",life:4e3});return}const e=k.value.filter(b=>b.trim()!=="");if(e.length===0){m.add({severity:"warn",summary:"Campos requeridos",detail:"Debes agregar al menos una condición válida.",life:4e3});return}const l=I.value.filter(b=>b.trim()!=="");if(l.length===0){m.add({severity:"warn",summary:"Campos requeridos",detail:"Debes agregar al menos un recordatorio válido.",life:4e3});return}if(x.value.length===0){m.add({severity:"warn",summary:"Imágenes requeridas",detail:"Debes subir al menos una imagen.",life:4e3});return}const i=2*1024*1024;if(T.value.filter(b=>b.size>i).length>0){m.add({severity:"warn",summary:"Imágenes muy grandes",detail:"Máximo 2MB por imagen.",life:4e3});return}let p=new FormData;p.append("nombre",t.value.nombre||""),p.append("incluye",re(s)),p.append("condiciones",re(e)),p.append("recordatorio",re(l)),p.append("precio",t.value.precio||"");let J=D.value.find(b=>b.id===t.value.provincia_id),Je=J?J.pais_id:"";p.append("pais_id",Je),p.append("provincia_id",t.value.provincia_id||""),p.append("fecha_salida",t.value.fecha_salida),p.append("fecha_regreso",t.value.fecha_regreso),T.value.forEach(b=>p.append("imagenes[]",b)),M.value.forEach(b=>{const Qe=b.includes("/")?b.split("/").pop():b;p.append("removed_images[]",Qe)});try{t.value.id?(p.append("_method","PUT"),await U.post(`${se}/${t.value.id}`,p),m.add({severity:"success",summary:"Actualizado",detail:"Paquete actualizado",life:4e3})):(await U.post(se,p),m.add({severity:"success",summary:"Creado",detail:"Paquete creado",life:4e3})),q.value=!1,A.value=!1,await ie()}catch{m.add({severity:"error",summary:"Error",detail:"Revisa los campos e intenta nuevamente.",life:5e3})}},Ke=s=>{t.value={...s},z.value=!0},We=async()=>{try{await U.delete(`${se}/${t.value.id}`),await ie(),z.value=!1,m.add({severity:"success",summary:"Eliminado",detail:"Paquete eliminado",life:4e3})}catch{m.add({severity:"error",summary:"Error",detail:"No se pudo eliminar el paquete.",life:5e3})}},Ge=()=>{B.value=null,O.value=null,_.value=null,C.value=null,f.value.global.value=null,f.value.pais_id.value=null,f.value.provincia_id.value=null,f.value.fecha_salida.value=null,m.add({severity:"info",summary:"Filtros limpiados",detail:"Se han removido todos los filtros aplicados.",life:3e3})};return j(()=>B.value,s=>{f.value.pais_id.value=s,s?G(s):D.value=[]}),j(()=>O.value,s=>{f.value.provincia_id.value=s}),j(()=>_.value,Ae),j(()=>C.value,Ne),j([t,w,x,M],()=>{N.value&&q.value&&de(()=>{const s={...t.value,incluye_lista:[...w.value],imagenes_actuales:[...x.value]},e=JSON.stringify(s)!==JSON.stringify({...N.value,imagenes_actuales:N.value.imagenes_originales})||M.value.length>0,l=!N.value.id,i=t.value.nombre||t.value.destino||t.value.fecha_salida||t.value.fecha_regreso||t.value.precio||t.value.pais_id||t.value.provincia_id||w.value.length>0||x.value.length>0;A.value=e||l&&i})},{deep:!0,flush:"post"}),(s,e)=>(c(),u(E,null,[n(o(Ze),{title:"Paquetes"}),n(aa,null,{default:v(()=>[n(o(sa),{class:"z-[9999]"}),a("div",ca,[a("div",va,[e[23]||(e[23]=a("h3",{class:"text-lg sm:text-2xl text-blue-600 font-bold"},"Catálogo de Paquetes",-1)),a("button",{class:"bg-red-500 border border-red-500 p-2 text-sm text-white shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:je},[n(o(d),{icon:o(X),class:"h-4 w-4 text-white"},null,8,["icon"]),e[22]||(e[22]=a("span",null," Agregar paquete",-1))])]),n(o(ta),{value:oe.value,dataKey:"id",paginator:!0,rows:te.value,rowsPerPageOptions:Fe.value,rowsPerPage:te.value,"onUpdate:rowsPerPage":e[3]||(e[3]=l=>te.value=l),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} paquetes",class:"overflow-x-auto max-w-full",style:{display:"block","max-width":"84vw"},responsiveLayout:"scroll",pt:{root:{class:"text-sm"},wrapper:{class:"text-sm"},table:{class:"text-sm"},thead:{class:"text-sm"},headerRow:{class:"text-sm"},headerCell:{class:"text-sm font-medium py-3 px-2"},tbody:{class:"text-sm"},bodyRow:{class:"h-20 text-sm"},bodyCell:{class:"py-3 px-2 text-sm"},paginator:{class:"text-xs sm:text-sm"},paginatorWrapper:{class:"flex flex-wrap justify-center sm:justify-between items-center gap-2 p-2"}}},{header:v(()=>[a("div",ma,[a("div",pa,[a("div",fa,[e[24]||(e[24]=a("h3",{class:"text-base font-medium text-gray-800 flex items-center gap-2"},[a("i",{class:"pi pi-filter text-blue-600 text-sm"}),a("span",null,"Filtros")],-1)),a("div",ga,y(oe.value.length)+" resultado"+y(oe.value.length!==1?"s":""),1)]),a("button",{class:"bg-red-500 hover:bg-red-600 border border-red-500 px-3 py-1 text-sm text-white shadow-md rounded-md",onClick:Ge},[n(o(d),{icon:o(da),class:"h-4 w-4 text-white"},null,8,["icon"]),e[25]||(e[25]=a("span",null," Limpiar filtros",-1))])]),a("div",ba,[a("div",null,[n(o(we),{modelValue:f.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=l=>f.value.global.value=l),placeholder:"🔍 Buscar paquetes...",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"}},null,8,["modelValue"])]),a("div",ha,[a("div",null,[n(o(me),{modelValue:B.value,"onUpdate:modelValue":e[1]||(e[1]=l=>B.value=l),options:K.value,optionLabel:"nombre",optionValue:"id",placeholder:"País",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"},clearable:!0},null,8,["modelValue","options"])]),a("div",null,[n(o(me),{modelValue:O.value,"onUpdate:modelValue":e[2]||(e[2]=l=>O.value=l),options:D.value,optionLabel:"nombre",optionValue:"id",placeholder:"Provincia",class:"w-full h-9 text-sm",style:{"background-color":"white","border-color":"#93c5fd"},clearable:!0},null,8,["modelValue","options"])])])])])]),default:v(()=>[n(o(L),{field:"nombre",header:"Nombre",sortable:"",class:"w-44 min-w-44"},{body:v(l=>[a("div",xa,y(l.data.nombre),1)]),_:1}),n(o(L),{field:"incluye",header:"Incluye",class:"w-40 min-w-40"},{body:v(l=>[a("ul",ya,[(c(!0),u(E,null,Q(ee(l.data.incluye),i=>(c(),u("li",{key:i},y(i),1))),128))])]),_:1}),n(o(L),{field:"pais.nombre",header:"País",class:"w-32 min-w-32"},{body:v(l=>{var i;return[a("div",wa,y((i=l.data.pais)==null?void 0:i.nombre),1)]}),_:1}),n(o(L),{field:"provincia.nombre",header:"Provincia",class:"w-32 min-w-32"},{body:v(l=>{var i;return[a("div",_a,y((i=l.data.provincia)==null?void 0:i.nombre),1)]}),_:1}),n(o(L),{field:"fecha_salida",header:"Fecha salida",class:"w-36 min-w-36"},{body:v(l=>[a("div",Ca,y(l.data.fecha_salida),1)]),_:1}),n(o(L),{field:"precio",header:"Precio",class:"w-24 min-w-24"},{body:v(l=>[a("div",Da,y(isNaN(Number(l.data.precio))?"":`$${Number(l.data.precio).toFixed(2)}`),1)]),_:1}),n(o(L),{exportable:!1,class:"w-56 min-w-56"},{header:v(()=>e[26]||(e[26]=[a("div",{class:"text-center w-full font-bold"}," Acciones ",-1)])),body:v(l=>[a("div",ka,[a("button",{class:"bg-orange-200/30 border py-2 px-1 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:i=>Ee(l.data)},[n(o(d),{icon:o(Ce),class:"h-4 w-4 text-orange-600"},null,8,["icon"]),e[27]||(e[27]=h("  Editar "))],8,Pa),a("button",{class:"bg-blue-200/50 border py-2 px-1 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:i=>Be(l.data.imagenes)},[n(o(d),{icon:o(na),class:"h-4 w-4 text-blue-600"},null,8,["icon"]),e[28]||(e[28]=h("  Imgs "))],8,Ia),a("button",{class:"bg-red-200/30 border py-2 px-1 text-sm shadow-md hover:shadow-lg rounded-md hover:-translate-y-1 transition-transform duration-300",onClick:i=>Ke(l.data)},[n(o(d),{icon:o(ra),class:"h-4 w-4 text-red-600"},null,8,["icon"]),e[29]||(e[29]=h("  Eliminar "))],8,Fa)])]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","rowsPerPage"]),n(o(le),{visible:q.value,"onUpdate:visible":e[15]||(e[15]=l=>q.value=l),header:Y.value+" Paquete",modal:!0,style:{width:"500px"},closable:!1},{footer:v(()=>[a("div",Cl,[a("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Re},[n(o(d),{icon:o(R),class:"h-5 text-green-600"},null,8,["icon"]),e[41]||(e[41]=h("Cancelar "))]),a("button",{class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Oe},[n(o(d),{icon:o(De),class:"h-5 text-white"},null,8,["icon"]),h(y(Y.value),1)])])]),default:v(()=>[a("div",Va,[a("div",qa,[a("div",Sa,[e[30]||(e[30]=a("label",{for:"nombre",class:"w-24 flex items-center gap-1"},[h("Nombre: "),a("span",{class:"text-red-500 font-bold"},"*")],-1)),n(o(we),{modelValue:t.value.nombre,"onUpdate:modelValue":e[4]||(e[4]=l=>t.value.nombre=l),modelModifiers:{trim:!0},id:"nombre",name:"nombre",maxlength:100,class:"flex-1"},null,8,["modelValue"])]),t.value.nombre&&t.value.nombre.length<6?(c(),u("small",La," El nombre debe tener al menos 6 caracteres. ")):S("",!0)]),a("div",$a,[a("div",Aa,[e[31]||(e[31]=a("label",{class:"w-24 flex items-center gap-1 mt-2"},"Incluye:",-1)),a("div",Na,[a("div",Ua,[ue(a("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>V.value=l),type:"text",placeholder:"Agregar nuevo elemento...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md",onKeyup:ce(ye,["enter"])},null,544),[[ve,V.value]]),a("button",{type:"button",onClick:ye,disabled:!V.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed"},[n(o(d),{icon:o(X),class:"h-5"},null,8,["icon"])],8,ja)]),a("div",Ea,[(c(!0),u(E,null,Q(w.value,(l,i)=>(c(),u("div",{key:i,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[a("span",Ra,y(l),1),a("button",{type:"button",onClick:g=>Me(i),class:"text-red-500 hover:text-red-700 p-1"},[n(o(d),{icon:o(R),class:"h-5"},null,8,["icon"])],8,Ta)]))),128))]),w.value.length===0?(c(),u("div",Ma,"Sin elementos agregados.")):S("",!0)])])]),a("div",za,[a("div",Ha,[e[32]||(e[32]=a("label",{class:"w-24 flex items-center gap-1 mt-2"},[h("Condiciones:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),a("div",Ba,[a("div",Oa,[ue(a("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>P.value=l),type:"text",placeholder:"Agregar condición...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md",onKeyup:ce(pe,["enter"])},null,544),[[ve,P.value]]),a("button",{type:"button",onClick:pe,disabled:!P.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed"},[n(o(d),{icon:o(X),class:"h-5"},null,8,["icon"])],8,Ka)]),a("div",Wa,[(c(!0),u(E,null,Q(k.value,(l,i)=>(c(),u("div",{key:i,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[a("span",Ga,y(l),1),a("button",{type:"button",onClick:g=>Pe(i),class:"text-red-500 hover:text-red-700 p-1"},[n(o(d),{icon:o(R),class:"h-5"},null,8,["icon"])],8,Ja)]))),128))]),k.value.length===0?(c(),u("div",Qa,"Sin condiciones agregadas.")):S("",!0)])])]),a("div",Xa,[a("div",Ya,[e[33]||(e[33]=a("label",{class:"w-24 flex items-center gap-1 mt-2"},[h("Recordatorio:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),a("div",Za,[a("div",el,[ue(a("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>F.value=l),type:"text",placeholder:"Agregar recordatorio...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md",onKeyup:ce(fe,["enter"])},null,544),[[ve,F.value]]),a("button",{type:"button",onClick:fe,disabled:!F.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed"},[n(o(d),{icon:o(X),class:"h-5"},null,8,["icon"])],8,al)]),a("div",ll,[(c(!0),u(E,null,Q(I.value,(l,i)=>(c(),u("div",{key:i,class:"flex items-center justify-between bg-gray-50 p-2 rounded-md border"},[a("span",sl,y(l),1),a("button",{type:"button",onClick:g=>Ie(i),class:"text-red-500 hover:text-red-700 p-1"},[n(o(d),{icon:o(R),class:"h-5"},null,8,["icon"])],8,tl)]))),128))]),I.value.length===0?(c(),u("div",ol,"Sin recordatorios agregados.")):S("",!0)])])]),a("div",il,[a("div",nl,[a("div",rl,[e[34]||(e[34]=a("label",{for:"provincia",class:"w-24"},[h("Provincia:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),n(o(me),{modelValue:t.value.provincia_id,"onUpdate:modelValue":e[8]||(e[8]=l=>t.value.provincia_id=l),options:D.value,optionLabel:"nombre",optionValue:"id",id:"provincia",filter:!0,filterPlaceholder:"Buscar provincia...",showClear:!0,class:ea([{"p-invalid":$.value&&!t.value.provincia_id},"flex-1"]),placeholder:"Selecciona una provincia",onInput:e[9]||(e[9]=l=>s.onInputDropdown&&s.onInputDropdown("provincia",l)),onFilter:e[10]||(e[10]=l=>s.onFilterDropdown&&s.onFilterDropdown("provincia",l))},null,8,["modelValue","options","class"])]),$.value&&!t.value.provincia_id?(c(),u("small",dl,"La provincia es obligatoria.")):S("",!0)])]),a("div",ul,[a("div",cl,[e[35]||(e[35]=a("label",{class:"flex items-center gap-1 mb-2"},[h("Fecha salida:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),n(o(_e),{modelValue:t.value.fecha_salida,"onUpdate:modelValue":e[11]||(e[11]=l=>t.value.fecha_salida=l),class:"w-full",minDate:he(),maxDate:Se(),dateFormat:"yy-mm-dd",showIcon:"",iconDisplay:"input",placeholder:"Selecciona fecha de salida"},null,8,["modelValue","minDate","maxDate"])]),a("div",vl,[e[36]||(e[36]=a("label",{class:"flex items-center gap-1 mb-2"},[h("Fecha regreso:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),n(o(_e),{modelValue:t.value.fecha_regreso,"onUpdate:modelValue":e[12]||(e[12]=l=>t.value.fecha_regreso=l),class:"w-full",minDate:qe(),dateFormat:"yy-mm-dd",showIcon:"",iconDisplay:"input",placeholder:"Selecciona fecha de regreso"},null,8,["modelValue","minDate"])])]),a("div",ml,[a("div",pl,[e[37]||(e[37]=a("label",{class:"w-24 flex items-center gap-1"},[h("Precio:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),n(o(oa),{modelValue:t.value.precio,"onUpdate:modelValue":e[13]||(e[13]=l=>t.value.precio=l),mode:"currency",currency:"USD",locale:"en-US",min:.01,max:999999.99,maxFractionDigits:2,minFractionDigits:2,class:"flex-1",placeholder:"$0.00"},null,8,["modelValue"])]),$.value&&(t.value.precio==null||t.value.precio<=0||t.value.precio>999999.99)?(c(),u("small",fl,"El precio es obligatorio, debe ser mayor a 0 y menor o igual a 99999999.99.")):S("",!0)]),a("div",gl,[a("div",bl,[e[39]||(e[39]=a("label",{class:"w-24 flex items-center gap-1"},[h("Imágenes:"),a("span",{class:"text-red-500 font-bold"},"*")],-1)),a("div",hl,[a("input",{type:"file",id:"imagenes",name:"imagenes[]",accept:"image/*",multiple:"",onChange:ze,class:"hidden",ref_key:"fileInput",ref:Ve},null,544),a("button",{type:"button",class:"bg-white hover:bg-red-50 text-red-500 hover:text-red-600 border border-red-500 hover:border-red-600 px-6 py-2 rounded-md flex items-center gap-2",onClick:e[14]||(e[14]=l=>s.$refs.fileInput.click())},[n(o(d),{icon:o(X),class:"h-4"},null,8,["icon"]),e[38]||(e[38]=a("span",null,"Subir imágenes",-1))])])]),$.value&&x.value.length===0?(c(),u("small",xl,"Las imágenes son obligatorias (al menos una).")):S("",!0)]),a("div",yl,[(c(!0),u(E,null,Q(x.value,(l,i)=>(c(),u("div",{key:i,class:"relative w-32 h-32"},[a("img",{src:l.startsWith("data:image")?l:"/storage/"+l,alt:"Vista previa",class:"w-full h-full object-cover rounded border"},null,8,wl),a("button",{onClick:g=>He(i),class:"absolute top-2 right-2 bg-gray-600/80 hover:bg-gray-700/80 text-white font-bold py-1 px-2 rounded-full shadow",style:{transform:"translate(50%, -50%)"}},e[40]||(e[40]=[a("i",{class:"pi pi-times text-xs"},null,-1)]),8,_l)]))),128))])])]),_:1},8,["visible","header"]),n(o(le),{visible:z.value,"onUpdate:visible":e[17]||(e[17]=l=>z.value=l),header:"Eliminar paquete",modal:!0,style:{width:"350px"},closable:!1},{footer:v(()=>[a("div",Pl,[a("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[16]||(e[16]=l=>z.value=!1)},[n(o(d),{icon:o(R),class:"h-5"},null,8,["icon"]),e[45]||(e[45]=a("span",null,"No",-1))]),a("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:We},[n(o(d),{icon:o(De),class:"h-5"},null,8,["icon"]),e[46]||(e[46]=a("span",null,"Sí",-1))])])]),default:v(()=>[a("div",Dl,[n(o(d),{icon:o(ke),class:"h-8 w-8 text-red-500"},null,8,["icon"]),a("div",kl,[a("span",null,[e[42]||(e[42]=h("¿Estás seguro de eliminar el paquete: ")),a("b",null,y(t.value.nombre),1),e[43]||(e[43]=h("?"))]),e[44]||(e[44]=a("span",{class:"text-red-600 text-sm font-medium mt-1"},"Esta acción es irreversible.",-1))])])]),_:1},8,["visible"]),n(o(le),{visible:H.value,"onUpdate:visible":e[18]||(e[18]=l=>H.value=l),header:"Cambios sin guardar",modal:!0,style:{width:"400px"},closable:!1},{footer:v(()=>[a("div",Fl,[a("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:Te},[n(o(d),{icon:o(Ce),class:"h-4"},null,8,["icon"]),e[48]||(e[48]=a("span",null,"Continuar",-1))]),a("button",{type:"button",class:"bg-red-500 hover:bg-red-700 text-white border-none px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:xe},[n(o(d),{icon:o(ua),class:"h-4"},null,8,["icon"]),e[49]||(e[49]=a("span",null,"Salir sin guardar",-1))])])]),default:v(()=>[a("div",Il,[n(o(d),{icon:o(ke),class:"h-8 w-8 text-red-500"},null,8,["icon"]),e[47]||(e[47]=a("div",{class:"flex flex-col"},[a("span",null,"¡Tienes información sin guardar!"),a("span",{class:"text-red-600 text-sm font-medium mt-1"},"¿Deseas salir sin guardar?")],-1))])]),_:1},8,["visible"]),n(o(le),{visible:Z.value,"onUpdate:visible":e[21]||(e[21]=l=>Z.value=l),header:"Imágenes del paquete",modal:!0,closable:!1,style:{width:"700px"}},{footer:v(()=>[a("div",$l,[a("button",{type:"button",class:"bg-white hover:bg-green-100 text-green-600 border border-green-600 px-6 py-2 rounded-md transition-all duration-200 ease-in-out flex items-center gap-2",onClick:e[20]||(e[20]=l=>Z.value=!1)},[n(o(d),{icon:o(R),class:"h-5"},null,8,["icon"]),e[50]||(e[50]=a("span",null,"Cerrar",-1))])])]),default:v(()=>[W.value.length?(c(),u("div",Vl,[n(o(ia),{value:W.value,numVisible:1,numScroll:1,circular:!0,page:be.value,"onUpdate:page":e[19]||(e[19]=l=>be.value=l),class:"w-full",showIndicators:W.value.length>1,showNavigators:W.value.length>1,style:{"max-width":"610px"}},{item:v(l=>[a("div",ql,[a("img",{src:l.data,alt:"Imagen paquete",class:"w-auto h-full max-h-96 object-contain rounded shadow"},null,8,Sl)])]),_:1},8,["value","page","showIndicators","showNavigators"])])):(c(),u("div",Ll,"No hay imágenes para este paquete."))]),_:1},8,["visible"])])]),_:1})],64))}};export{Ml as default};
